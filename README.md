# å°ç£è‚¡ç¥¨å›æ¸¬èˆ‡è‡ªå‹•ä¸‹å–®ç³»çµ±

é€™æ˜¯ä¸€å€‹å®Œæ•´çš„å°ç£è‚¡ç¥¨å›æ¸¬èˆ‡è‡ªå‹•ä¸‹å–®ç³»çµ±ï¼Œæ”¯æ´å¤šç­–ç•¥ã€å¤šè³‡æ–™ä¾†æºã€å¤šè‚¡ç¥¨ä¸¦è¡Œè™•ç†ï¼Œä¸¦æä¾›å®Œæ•´çš„å‰å¾Œç«¯ä»‹é¢ã€‚ç³»çµ±æ¡ç”¨ç¾ä»£åŒ–çš„ Web æ¶æ§‹ï¼Œæ”¯æ´ Jupyter é¢¨æ ¼çš„äº’å‹•å¼ç­–ç•¥é–‹ç™¼ã€‚

## ğŸš€ åŠŸèƒ½ç‰¹è‰²

### ğŸ“Š å›æ¸¬åŠŸèƒ½
- **ç­–ç•¥æ”¯æ´**ï¼šè‡ªå®šç¾©ç­–ç•¥
- **å¤šè³‡æ–™ä¾†æº**ï¼šExcelä¸Šå‚³ã€APIè³‡æ–™ã€æ‰‹å‹•è¼¸å…¥ã€ç¯„ä¾‹è³‡æ–™
- **å¤šè‚¡ç¥¨ä¸¦è¡Œè™•ç†**ï¼šä½¿ç”¨å¤šåŸ·è¡Œç·’æå‡å›æ¸¬æ•ˆèƒ½
- **æ™ºèƒ½æ¬„ä½æ˜ å°„**ï¼šæ”¯æ´å¤šç¨®Excelæ¬„ä½æ ¼å¼
- **å®Œæ•´å‰å¾Œç«¯**ï¼šç¾ä»£åŒ–Webä»‹é¢ï¼Œæ”¯æ´å³æ™‚å›æ¸¬
- **è©³ç´°æ¸¬è©¦**ï¼šå®Œæ•´çš„å–®å…ƒæ¸¬è©¦å’Œæ•´åˆæ¸¬è©¦

### ğŸ¤– è‡ªå‹•ä¸‹å–®åŠŸèƒ½
- **å³æ™‚ç›£æ§**ï¼šè‡ªå‹•åŸ·è¡Œç­–ç•¥ä¿¡è™Ÿ
- **é¢¨éšªæ§åˆ¶**ï¼šåœåˆ©åœæã€éƒ¨ä½ç®¡ç†
- **å¤šåˆ¸å•†æ”¯æ´**ï¼šå¯æ“´å±•çš„åˆ¸å•†APIä»‹é¢

### ğŸ—„ï¸ å¿«å–ç³»çµ±
- **é›™å±¤å¿«å–**ï¼šè¨˜æ†¶é«”å¿«å– + æª”æ¡ˆå¿«å–
- **è‡ªå‹•ç®¡ç†**ï¼šè¨˜æ†¶é«”ä¸è¶³æ™‚è‡ªå‹•æ¸…ç†æœ€èˆŠçš„è³‡æ–™
- **TTL æ©Ÿåˆ¶**ï¼šå¯è¨­å®šå¿«å–å­˜æ´»æ™‚é–“
- **çµ±è¨ˆè³‡è¨Š**ï¼šæä¾›è©³ç´°çš„å¿«å–ä½¿ç”¨çµ±è¨ˆ
- **API æ•´åˆ**ï¼šèˆ‡ StockAPI ç„¡ç¸«æ•´åˆ

### ğŸ“ˆ è‡ªå®šç¾©ç­–ç•¥ç³»çµ±
### å‚³çµ±ç­–ç•¥ç·¨è¼¯å™¨
- **è¦–è¦ºåŒ–ç·¨è¼¯å™¨**ï¼šç¶²é ç‰ˆç­–ç•¥ç·¨è¼¯å™¨
- **å³æ™‚ç¨‹å¼ç¢¼åŸ·è¡Œ**ï¼šç¨‹å¼ç¢¼ç«‹å³åœ¨å¾Œç«¯åŸ·è¡Œä¸¦é¡¯ç¤ºçµæœ
- **æ¨¡æ¿ç³»çµ±**ï¼šæä¾›ç­–ç•¥æ¨¡æ¿
### ğŸ’» Jupyter é¢¨æ ¼
- **äº’å‹•å¼é–‹ç™¼**ï¼šæ”¯æ´å–®å…ƒæ ¼ç·¨è¼¯å’Œå³æ™‚åŸ·è¡Œ
- **è®Šæ•¸å…±äº«**ï¼šå–®å…ƒæ ¼é–“è®Šæ•¸ä¿æŒç‹€æ…‹
- **ç­†è¨˜æœ¬ç®¡ç†**ï¼šæ”¯æ´å„²å­˜ã€è¼‰å…¥ã€åŒ¯å‡ºç­†è¨˜æœ¬
- **å³æ™‚é©—è­‰**ï¼šèªæ³•æª¢æŸ¥å’Œå‡½æ•¸æª¢æ¸¬

- **ç‰ˆæœ¬ç®¡ç†**ï¼šç­–ç•¥çš„å»ºç«‹ã€æ›´æ–°ã€åˆªé™¤
- **å‹•æ…‹è¼‰å…¥**ï¼šç¨‹å¼ç¢¼å­—ä¸²å‹•æ…‹ç·¨è­¯åŸ·è¡Œ
- **åœ–è¡¨é¡¯ç¤º**ï¼šæ”¯æ´ Matplotlibã€Seabornã€Plotly åœ–è¡¨
- **è³‡æ–™åˆ†æ**ï¼šå…§å»º Pandasã€Polarsã€NumPy ç­‰è³‡æ–™åˆ†æå·¥å…·

### ğŸ“‹ è³‡æ–™é è¦½ç³»çµ±
- **ç¯„ä¾‹è³‡æ–™**ï¼šæä¾›å¤šç¨®é è¨­è³‡æ–™é¡å‹
- **è¡¨æ ¼é è¦½**ï¼šæ”¯æ´æœ€å¤š100ç­†è³‡æ–™çš„è¡¨æ ¼é¡¯ç¤º
- **è‡ªå®šç¾©è³‡æ–™é¡å‹**ï¼šå¯æ–°å¢å’Œç®¡ç†è‡ªå®šç¾©è³‡æ–™é¡å‹
- **å¿«é€Ÿæ¸¬è©¦**ï¼šå¿«é€Ÿè¼‰å…¥è³‡æ–™æ¸¬è©¦ç­–ç•¥é‚è¼¯

### ğŸ“Š äº¤æ˜“è¨˜éŒ„ç®¡ç†
- **å¤šç¶­åº¦ç¯©é¸**ï¼šæ”¯æ´æ—¥æœŸã€è‚¡ç¥¨ã€ç­–ç•¥ã€æ–¹å‘ç­‰å¤šç¨®ç¯©é¸æ¢ä»¶
- **çµ±è¨ˆåˆ†æ**ï¼šæä¾›å‹ç‡ã€å ±é…¬ç‡ã€æœ€å¤§å›æ’¤ç­‰é—œéµæŒ‡æ¨™
- **è©³ç´°è³‡è¨Š**ï¼šåŒ…å«é€²å‡ºå ´åƒ¹æ ¼ã€æç›Šè¨ˆç®—ã€é¢¨éšªæ§åˆ¶ç­‰å®Œæ•´è³‡è¨Š
- **åŒ¯å‡ºåŠŸèƒ½**ï¼šæ”¯æ´ExcelåŒ¯å‡ºå’Œåˆ†é é¡¯ç¤º

### ğŸ¯ è‚¡ç¥¨é¸æ“‡å™¨
- **å¤šä¾†æºæ”¯æ´**ï¼šExcelåŒ¯å…¥ã€æ‰‹å‹•æ–°å¢ã€æ¢ä»¶ç¯©é¸
- **åˆ—è¡¨ç®¡ç†**ï¼šå»ºç«‹ã€ç·¨è¼¯ã€åˆªé™¤é¸è‚¡åˆ—è¡¨
- **ç­–ç•¥æ•´åˆ**ï¼šèˆ‡ç­–ç•¥ç·¨è¼¯å™¨ç„¡ç¸«æ•´åˆ
- **æ‰¹é‡æ“ä½œ**ï¼šæ”¯æ´æ‰¹é‡æ–°å¢ã€ç§»é™¤è‚¡ç¥¨

### ğŸ› ï¸ å…±åŒåŠŸèƒ½
- **åƒ¹æ ¼è¨ˆç®—å·¥å…·**: æœ€å°è®Šå‹•å–®ä½ã€æ¼²è·Œåœåƒ¹æ ¼è¨ˆç®—
- **äº¤æ˜“æˆæœ¬è¨ˆç®—**: æ‰‹çºŒè²»ã€è­‰äº¤ç¨…è‡ªå‹•è¨ˆç®—
- **é™¤æ¬Šæ¯èª¿æ•´**: è‡ªå‹•è™•ç†é™¤æ¬Šæ¯å°è‚¡åƒ¹çš„å½±éŸ¿
- **æ¨¡çµ„åŒ–è¨­è¨ˆ**: æ˜“æ–¼æ“´å±•å’Œç¶­è­·

## ğŸ“ å°ˆæ¡ˆçµæ§‹

```
trading_web_system/
â”œâ”€â”€ api/                    # APIæ¨¡çµ„
â”‚   â”œâ”€â”€ stock_api.py       # è‚¡ç¥¨è³‡æ–™API
â”‚   â”œâ”€â”€ broker_api.py      # åˆ¸å•†API
â”‚   â”œâ”€â”€ jupyter_api.py     # Jupyterç·¨è¼¯å™¨API
â”‚   â”œâ”€â”€ strategy_api.py    # ç­–ç•¥ç®¡ç†API
â”‚   â”œâ”€â”€ backtest_api.py    # å›æ¸¬API
â”‚   â”œâ”€â”€ chart_api.py       # åœ–è¡¨API
â”‚   â”œâ”€â”€ cache_api.py       # å¿«å–API
â”‚   â”œâ”€â”€ excel_api.py       # Excelè™•ç†API
â”‚   â”œâ”€â”€ sample_data_api.py # ç¯„ä¾‹è³‡æ–™API
â”‚   â””â”€â”€ stock_list_api.py  # è‚¡ç¥¨æ¸…å–®API
â”œâ”€â”€ config/                # é…ç½®æª”æ¡ˆ
â”‚   â”œâ”€â”€ api_config.py      # APIé…ç½®
â”‚   â””â”€â”€ trading_config.py  # äº¤æ˜“é…ç½®
â”œâ”€â”€ core/                  # æ ¸å¿ƒåŠŸèƒ½
â”‚   â”œâ”€â”€ cache_manager.py   # å¿«å–ç®¡ç†å™¨
â”‚   â”œâ”€â”€ data_provider.py   # è³‡æ–™æä¾›å™¨
â”‚   â”œâ”€â”€ price_utils.py     # åƒ¹æ ¼è¨ˆç®—å·¥å…·
â”‚   â”œâ”€â”€ stock_list_manager.py # è‚¡ç¥¨æ¸…å–®ç®¡ç†å™¨
â”‚   â”œâ”€â”€ technical_indicators.py # æŠ€è¡“æŒ‡æ¨™
â”‚   â”œâ”€â”€ trading_utils.py   # äº¤æ˜“å·¥å…·
â”‚   â””â”€â”€ utils.py           # é€šç”¨å·¥å…·å‡½æ•¸
â”œâ”€â”€ data/                  # è³‡æ–™ç›®éŒ„
â”‚   â”œâ”€â”€ cache/             # å¿«å–æª”æ¡ˆ
â”‚   â”œâ”€â”€ uploads/           # ä¸Šå‚³æª”æ¡ˆ
â”‚   â”œâ”€â”€ exports/           # åŒ¯å‡ºæª”æ¡ˆ
â”‚   â”œâ”€â”€ strategies/        # ç­–ç•¥æª”æ¡ˆ
â”‚   â””â”€â”€ stock_lists/       # è‚¡ç¥¨æ¸…å–®
â”œâ”€â”€ routes/                # è·¯ç”±æ¨¡çµ„
â”‚   â”œâ”€â”€ api_routes.py      # APIè·¯ç”±
â”‚   â””â”€â”€ pages.py           # é é¢è·¯ç”±
â”œâ”€â”€ strategies/            # ç­–ç•¥æ¨¡çµ„
â”‚   â”œâ”€â”€ base_strategy.py   # ç­–ç•¥åŸºç¤é¡åˆ¥
â”‚   â”œâ”€â”€ dynamic_strategy.py # å‹•æ…‹ç­–ç•¥
â”‚   â””â”€â”€ strategy_manager.py # ç­–ç•¥ç®¡ç†å™¨
â”œâ”€â”€ web/                   # ç¶²é ä»‹é¢
â”‚   â”œâ”€â”€ static/            # éœæ…‹æª”æ¡ˆ
â”‚   â”‚   â”œâ”€â”€ css/           # æ¨£å¼æª”æ¡ˆ
â”‚   â”‚   â”œâ”€â”€ js/            # JavaScriptæª”æ¡ˆ
â”‚   â”‚   â””â”€â”€ images/        # åœ–ç‰‡æª”æ¡ˆ
â”‚   â””â”€â”€ templates/         # HTMLæ¨¡æ¿
â”‚       â”œâ”€â”€ base.html      # åŸºç¤æ¨¡æ¿
â”‚       â”œâ”€â”€ index.html     # é¦–é 
â”‚       â”œâ”€â”€ backtest.html  # å›æ¸¬é é¢
â”‚       â”œâ”€â”€ strategy_editor.html # ç­–ç•¥ç·¨è¼¯å™¨
â”‚       â”œâ”€â”€ stock_selector.html # è‚¡ç¥¨é¸æ“‡å™¨
â”‚       â”œâ”€â”€ cache_manager.html # å¿«å–ç®¡ç†
â”‚       â”œâ”€â”€ auto_trading.html # è‡ªå‹•ä¸‹å–®é é¢
â”‚       â”œâ”€â”€ trading_records.html # äº¤æ˜“è¨˜éŒ„é é¢
â”‚       â””â”€â”€ settings.html  # è¨­å®šé é¢
â”œâ”€â”€ main.py               # FastAPIä¸»ç¨‹å¼
â”œâ”€â”€ run.py                # å•Ÿå‹•è…³æœ¬
â”œâ”€â”€ requirements.txt      # ä¾è³´å¥—ä»¶
â””â”€â”€ README.md            # èªªæ˜æ–‡ä»¶
```

## ğŸ› ï¸ å®‰è£èˆ‡è¨­å®š

### 1. ç’°å¢ƒéœ€æ±‚
- Python 3.8+
- Windows 10/11 æˆ– Linux/macOS

### 2. å®‰è£ä¾è³´
```bash
pip install -r requirements.txt
```

### 3. å•Ÿå‹•ç³»çµ±
```bash
python run.py
```

ç³»çµ±å°‡åœ¨ `http://localhost:8000` å•Ÿå‹•

## ğŸ“– ä½¿ç”¨èªªæ˜

### é¦–é åŠŸèƒ½
- **å›æ¸¬ç³»çµ±**: é€²å…¥è‚¡ç¥¨ç­–ç•¥å›æ¸¬åŠŸèƒ½
- **ç­–ç•¥ç·¨è¼¯å™¨**: é€²å…¥ Jupyter é¢¨æ ¼ç­–ç•¥ç·¨è¼¯å™¨
- **è‚¡ç¥¨é¸æ“‡å™¨**: ç®¡ç†è‚¡ç¥¨æ¸…å–®
- **å¿«å–ç®¡ç†**: ç®¡ç†ç³»çµ±å¿«å–
- **è‡ªå‹•ä¸‹å–®**: é€²å…¥è‡ªå‹•äº¤æ˜“ç³»çµ±
- **äº¤æ˜“è¨˜éŒ„**: æŸ¥çœ‹æ­·å²äº¤æ˜“è¨˜éŒ„
- **ç³»çµ±è¨­å®š**: é…ç½®APIå’Œç³»çµ±åƒæ•¸

### ç­–ç•¥ç·¨è¼¯å™¨

#### 1. ç·¨è¼¯æ¨¡å¼
- **å‚³çµ±æ¨¡å¼**: åŸæœ‰çš„ç¨‹å¼ç¢¼ç·¨è¼¯å™¨ï¼Œé©åˆç·¨å¯«å®Œæ•´çš„ç­–ç•¥ç¨‹å¼ç¢¼
- **Jupyter æ¨¡å¼**: äº’å‹•å¼å–®å…ƒæ ¼ç·¨è¼¯å™¨ï¼Œé©åˆæ¢ç´¢æ€§è³‡æ–™åˆ†æå’Œç­–ç•¥é–‹ç™¼

#### 2. å–®å…ƒæ ¼åŠŸèƒ½
- **æ–°å¢å–®å…ƒæ ¼**: é»æ“Šã€Œæ–°å¢å–®å…ƒæ ¼ã€æŒ‰éˆ•æˆ–ä½¿ç”¨ Ctrl+Enter
- **åŸ·è¡Œå–®å…ƒæ ¼**: é»æ“ŠåŸ·è¡ŒæŒ‰éˆ•æˆ–ä½¿ç”¨ Shift+Enter
- **åˆªé™¤å–®å…ƒæ ¼**: é»æ“Šåˆªé™¤æŒ‰éˆ•
- **é‡æ–°ç·¨è™Ÿ**: è‡ªå‹•é‡æ–°ç·¨è™Ÿå–®å…ƒæ ¼

#### 3. æ”¯æ´çš„æ¨¡çµ„
- **åŸºæœ¬ Python æ¨¡çµ„**: np, pd, pl, plt, sns, go
- **ç­–ç•¥å·¥å…·æ¨¡çµ„**: PriceUtils, Utils, TradeRecord, HoldingPosition

#### 4. ç¯„ä¾‹ç¨‹å¼ç¢¼
```python
# è¼‰å…¥ç¯„ä¾‹è³‡æ–™
import pandas as pd
import numpy as np

# ç”Ÿæˆè‚¡ç¥¨è³‡æ–™
dates = pd.date_range('2024-01-01', '2024-12-31', freq='D')
close_prices = 100 + np.cumsum(np.random.normal(0, 0.5, len(dates)))
df = pd.DataFrame({
    'date': dates,
    'close': close_prices,
    'volume': np.random.uniform(1000000, 5000000, len(dates))
})

print(f"è¼‰å…¥ {len(df)} ç­†è‚¡ç¥¨è³‡æ–™")
df.head()
```

### å¿«å–ç³»çµ±

#### 1. å¿«å–ç®¡ç†é é¢
è¨ªå• `/cache-manager` å¯ä»¥æŸ¥çœ‹ï¼š
- è¨˜æ†¶é«”ä½¿ç”¨é‡çµ±è¨ˆ
- å¿«å–é …ç›®è©³æƒ…
- è‚¡ç¥¨ä»£ç¢¼åˆ—è¡¨
- å¿«å–æ¸…ç†åŠŸèƒ½

#### 2. API æ•´åˆ
```python
from api.stock_api import StockAPI

async with StockAPI() as stock_api:
    # ç¬¬ä¸€æ¬¡è«‹æ±‚æœƒå¾ API å–å¾—ä¸¦å¿«å–
    data1 = await stock_api.get_stock_price(
        stock_ids=["2330"],
        start_date="2024-01-01",
        end_date="2024-01-03",
        use_cache=True  # å•Ÿç”¨å¿«å–
    )
```

### è‡ªå®šç¾©ç­–ç•¥ç³»çµ±

#### 1. ç­–ç•¥ç·¨è¼¯å™¨
è¨ªå• `/strategy-editor` é€²å…¥ç­–ç•¥ç·¨è¼¯å™¨ï¼Œå¯ä»¥ï¼š
- å»ºç«‹æ–°ç­–ç•¥
- ç·¨è¼¯ç¾æœ‰ç­–ç•¥
- è¼‰å…¥ç­–ç•¥æ¨¡æ¿
- é©—è­‰ç­–ç•¥ç¨‹å¼ç¢¼
- æ¸¬è©¦ç­–ç•¥åŠŸèƒ½

#### 2. ç­–ç•¥ç¨‹å¼ç¢¼æ ¼å¼
```python
def should_entry(stock_data, current_index):
    """åˆ¤æ–·æ˜¯å¦æ‡‰è©²é€²å ´"""
    current_row = stock_data[current_index]
    
    # ç¯„ä¾‹ï¼šç•¶æ”¶ç›¤åƒ¹å¤§æ–¼é–‹ç›¤åƒ¹æ™‚é€²å ´
    if current_row["close"] > current_row["open"]:
        return True, {"reason": "æ”¶ç›¤åƒ¹å¤§æ–¼é–‹ç›¤åƒ¹"}
    
    return False, {}

def should_exit(stock_data, current_index, position):
    """åˆ¤æ–·æ˜¯å¦æ‡‰è©²å‡ºå ´"""
    current_row = stock_data[current_index]
    entry_price = position["entry_price"]
    
    # è¨ˆç®—è™§æç‡
    loss_rate = ((current_row["close"] - entry_price) / entry_price) * 100
    
    # ç¯„ä¾‹ï¼šè™§æè¶…é5%æ™‚å‡ºå ´
    if loss_rate <= -5:
        return True, {"reason": f"è™§æ{loss_rate:.2f}%"}
    
    return False, {}
```

### è³‡æ–™é è¦½ç³»çµ±

#### 1. é è¨­è³‡æ–™é¡å‹
- **æ¯æ—¥è‚¡åƒ¹**: è‚¡ç¥¨æ¯æ—¥é–‹ç›¤ã€æ”¶ç›¤ã€æœ€é«˜ã€æœ€ä½åƒ¹ç­‰åŸºæœ¬è³‡è¨Š
- **åˆ†Kè‚¡åƒ¹**: è‚¡ç¥¨åˆ†Kç·šåœ–è³‡æ–™
- **é™¤æ¬Šæ¯è³‡æ–™**: è‚¡ç¥¨é™¤æ¬Šæ¯ç›¸é—œè³‡è¨Š
- **æ¯æ—¥è‚¡åƒ¹åˆä½µé™¤æ¬Šæ¯**: æ¯æ—¥è‚¡åƒ¹è³‡æ–™ä¸¦åŒ…å«é™¤æ¬Šæ¯èª¿æ•´è³‡è¨Š
- **æŠ€è¡“æŒ‡æ¨™**: åŒ…å«å„ç¨®æŠ€è¡“æŒ‡æ¨™çš„è‚¡åƒ¹è³‡æ–™

#### 2. ä½¿ç”¨æ–¹å¼
1. é–‹å•Ÿç­–ç•¥ç·¨è¼¯å™¨é é¢
2. é»æ“Šã€Œè¼‰å…¥ç¯„ä¾‹è³‡æ–™ã€æŒ‰éˆ•
3. åœ¨å°è©±æ¡†ä¸­é¸æ“‡è³‡æ–™é¡å‹
4. è¨­å®šç›¸é—œåƒæ•¸
5. é»æ“Šã€Œè¼‰å…¥è³‡æ–™ã€
6. è³‡æ–™å°‡ä»¥è¡¨æ ¼å½¢å¼é¡¯ç¤ºåœ¨é è¦½å€åŸŸ

### ğŸ“Š äº¤æ˜“è¨˜éŒ„ç®¡ç†

#### 1. ç¯©é¸åŠŸèƒ½
- **æ—¥æœŸç¯„åœç¯©é¸**: æŒ‰é€²å ´/å‡ºå ´æ—¥æœŸç¯„åœç¯©é¸
- **è‚¡ç¥¨ä»£ç¢¼ç¯©é¸**: æŒ‰ç‰¹å®šè‚¡ç¥¨ä»£ç¢¼ç¯©é¸
- **ç­–ç•¥é¡å‹ç¯©é¸**: æŒ‰ä½¿ç”¨çš„ç­–ç•¥ç¯©é¸
- **äº¤æ˜“æ–¹å‘ç¯©é¸**: æŒ‰è²·å…¥/è³£å‡ºæ–¹å‘ç¯©é¸
- **æç›Šç¯„åœç¯©é¸**: æŒ‰æç›Šé‡‘é¡ç¯„åœç¯©é¸

#### 2. çµ±è¨ˆåˆ†æ
- **ç¸½äº¤æ˜“æ¬¡æ•¸**: é¡¯ç¤ºç¸½äº¤æ˜“ç­†æ•¸
- **å‹ç‡çµ±è¨ˆ**: è¨ˆç®—ç²åˆ©äº¤æ˜“çš„æ¯”ä¾‹
- **ç¸½å ±é…¬**: é¡¯ç¤ºç¸½é«”æŠ•è³‡å ±é…¬ç‡
- **å¹³å‡å ±é…¬**: è¨ˆç®—å¹³å‡æ¯ç­†äº¤æ˜“çš„å ±é…¬ç‡
- **æœ€å¤§å–®ç­†ç²åˆ©/è™§æ**: é¡¯ç¤ºæœ€å¤§ç²åˆ©å’Œè™§æé‡‘é¡
- **æœ€å¤§å›æ’¤åˆ†æ**: åˆ†ææœ€å¤§å›æ’¤æœŸé–“å’Œå¹…åº¦

#### 3. è©³ç´°äº¤æ˜“è³‡è¨Š
- **é€²å‡ºå ´è³‡è¨Š**: é€²å ´æ—¥æœŸã€å‡ºå ´æ—¥æœŸã€é€²å ´åƒ¹æ ¼ã€å‡ºå ´åƒ¹æ ¼
- **äº¤æ˜“è©³æƒ…**: è‚¡ç¥¨ä»£ç¢¼ã€è‚¡ç¥¨åç¨±ã€äº¤æ˜“æ–¹å‘ã€è‚¡æ•¸
- **æç›Šè¨ˆç®—**: æç›Šé‡‘é¡ã€æç›Šç‡ã€æ‰‹çºŒè²»ã€è­‰äº¤ç¨…ã€æ·¨æç›Š
- **é¢¨éšªæ§åˆ¶**: åœåˆ©åƒ¹ã€åœæåƒ¹ã€å‡ºå ´åŸå› 
- **æŒæœ‰æœŸé–“**: æŒæœ‰å¤©æ•¸ã€ç­–ç•¥åç¨±

#### 4. åŒ¯å‡ºåŠŸèƒ½
- **ExcelåŒ¯å‡º**: å°‡ç¯©é¸çµæœåŒ¯å‡ºç‚ºExcelæª”æ¡ˆ
- **åˆ†é é¡¯ç¤º**: æ”¯æ´å¤§é‡è³‡æ–™çš„åˆ†é é¡¯ç¤º
- **å³æ™‚æ›´æ–°**: è‡ªå‹•é‡æ–°æ•´ç†æœ€æ–°äº¤æ˜“è¨˜éŒ„

### ğŸ¯ è‚¡ç¥¨é¸æ“‡å™¨

#### 1. é¸è‚¡åˆ—è¡¨ç®¡ç†
- **å»ºç«‹é¸è‚¡åˆ—è¡¨**: æ”¯æ´è‡ªå®šç¾©åç¨±å’Œæè¿°
- **ç·¨è¼¯é¸è‚¡åˆ—è¡¨**: ä¿®æ”¹åˆ—è¡¨åç¨±ã€æè¿°å’Œè‚¡ç¥¨å…§å®¹
- **åˆªé™¤é¸è‚¡åˆ—è¡¨**: å®‰å…¨åˆªé™¤ç¢ºèªæ©Ÿåˆ¶
- **åˆ—è¡¨åŒ¯å‡º**: å°‡é¸è‚¡åˆ—è¡¨åŒ¯å‡ºåˆ°ç­–ç•¥ç·¨è¼¯å™¨

#### 2. è‚¡ç¥¨ä¾†æºæ”¯æ´
- **Excelæª”æ¡ˆåŒ¯å…¥**: æ”¯æ´ `.xlsx` æ ¼å¼ï¼Œå¿…è¦æ¬„ä½ï¼š`stock_id`, `startdate`, `enddate`
- **æ‰‹å‹•æ–°å¢è‚¡ç¥¨**: å–®ç­†æ–°å¢è‚¡ç¥¨ä»£ç¢¼å’Œåç¨±
- **æ¢ä»¶ç¯©é¸**: å¤šæ¢ä»¶çµ„åˆç¯©é¸è‚¡ç¥¨
- **æ‰¹é‡æ“ä½œ**: æ”¯æ´æ‰¹é‡æ–°å¢ã€ç§»é™¤è‚¡ç¥¨

#### 3. ç­–ç•¥æ•´åˆ
- **åŒ¯å‡ºåˆ°ç­–ç•¥**: å°‡é¸è‚¡åˆ—è¡¨åŒ¯å‡ºåˆ°ç­–ç•¥ç·¨è¼¯å™¨
- **è‚¡ç¥¨ä¾†æºé¸æ“‡**: ç­–ç•¥ç·¨è¼¯å™¨ä¸­å¯é¸æ“‡è‚¡ç¥¨ä¾†æº
- **å‹•æ…‹åˆ‡æ›**: æ”¯æ´Excelæª”æ¡ˆæˆ–é¸è‚¡åˆ—è¡¨çš„å‹•æ…‹åˆ‡æ›

#### 4. è³‡æ–™æ ¼å¼
**Excelæª”æ¡ˆæ ¼å¼**ï¼š
| æ¬„ä½åç¨± | èªªæ˜ | ç¯„ä¾‹ |
|---------|------|------|
| stock_id | è‚¡ç¥¨ä»£ç¢¼ | 2330 |
| stock_name | è‚¡ç¥¨åç¨± | å°ç©é›» |
| start_date | é–‹å§‹æ—¥æœŸ | 2024-01-01 |
| end_date | çµæŸæ—¥æœŸ | 2024-12-31 |

#### 5. ä½¿ç”¨æ–¹å¼
1. **å»ºç«‹é¸è‚¡åˆ—è¡¨**ï¼š
   - é€²å…¥é¸è‚¡ç·¨è¼¯å™¨é é¢ (`/stock-selector`)
   - é»æ“Šã€Œæ–°å»ºé¸è‚¡åˆ—è¡¨ã€æŒ‰éˆ•
   - è¼¸å…¥åˆ—è¡¨åç¨±å’Œæè¿°
   - é¸æ“‡è‚¡ç¥¨ä¾†æºæ–¹å¼

2. **ExcelåŒ¯å…¥è‚¡ç¥¨**ï¼š
   - æº–å‚™Excelæª”æ¡ˆï¼ŒåŒ…å«å¿…è¦æ¬„ä½
   - é»æ“Šã€ŒåŒ¯å…¥Excelã€æŒ‰éˆ•
   - é¸æ“‡æª”æ¡ˆä¸¦ä¸Šå‚³
   - ç³»çµ±è‡ªå‹•è§£æä¸¦é¡¯ç¤ºè‚¡ç¥¨åˆ—è¡¨

3. **æ¢ä»¶ç¯©é¸è‚¡ç¥¨**ï¼š
   - é»æ“Šã€Œæ¢ä»¶ç¯©é¸ã€æŒ‰éˆ•
   - è¨­å®šç¯©é¸æ¢ä»¶
   - é»æ“Šã€Œå¥—ç”¨æ¢ä»¶ã€
   - æŸ¥çœ‹ç¯©é¸çµæœ

4. **åŒ¯å‡ºåˆ°ç­–ç•¥**ï¼š
   - åœ¨é¸è‚¡ç·¨è¼¯å™¨ä¸­é¸æ“‡è¦åŒ¯å‡ºçš„è‚¡ç¥¨
   - é»æ“Šã€ŒåŒ¯å‡ºåˆ°ç­–ç•¥ã€æŒ‰éˆ•
   - é¸æ“‡ç›®æ¨™ç­–ç•¥
   - ç¢ºèªåŒ¯å‡º

### å›æ¸¬åŠŸèƒ½ä½¿ç”¨

#### 1. é¸æ“‡ç­–ç•¥
- **ç•¶æ²–ç­–ç•¥**ï¼šç•¶æ—¥æ²–éŠ·ï¼Œä»¥æ¼²è·Œåœç‚ºä¾æ“š
- **æ³¢æ®µç­–ç•¥**ï¼šæ³¢æ®µäº¤æ˜“ï¼Œä»¥20æ—¥æ–°é«˜ç‚ºä¾æ“š
- **è©¢åœˆå…¬å‘Šç­–ç•¥**ï¼šåŸºæ–¼è©¢åœˆå…¬å‘Šé€²è¡Œäº¤æ˜“
- **è‡ªå®šç¾©ç­–ç•¥**ï¼šä½¿ç”¨ç­–ç•¥ç·¨è¼¯å™¨å»ºç«‹çš„è‡ªå®šç¾©ç­–ç•¥

#### 2. è¨­å®šè³‡æ–™ä¾†æº
- **APIæ¨¡å¼**ï¼šä¸Šå‚³åŒ…å«è‚¡ç¥¨ä»£ç¢¼å’Œæ—¥æœŸçš„Excelæª”æ¡ˆï¼Œç³»çµ±å¾APIå–å¾—è‚¡åƒ¹è³‡æ–™
- **Excelæ¨¡å¼**ï¼šä¸Šå‚³åŒ…å«å®Œæ•´Kç·šè³‡æ–™çš„Excelæª”æ¡ˆ
- **ç¯„ä¾‹è³‡æ–™**ï¼šä½¿ç”¨ç³»çµ±æä¾›çš„ç¯„ä¾‹è³‡æ–™

#### 3. Excelæª”æ¡ˆæ ¼å¼

**APIæ¨¡å¼æ ¼å¼**ï¼š
| stock_id | date |
|----------|------|
| 2330 | 2024-01-01 |
| 2330 | 2024-01-02 |

**Excelæ¨¡å¼æ ¼å¼**ï¼š
| stock_id | date | open | high | low | close |
|----------|------|------|------|-----|-------|
| 2330 | 2024-01-01 | 100 | 105 | 98 | 103 |
| 2330 | 2024-01-02 | 103 | 108 | 102 | 106 |

#### 4. ç­–ç•¥åƒæ•¸

**ç•¶æ²–ç­–ç•¥åƒæ•¸**ï¼š
- ä½¿ç”¨æ¼²è·Œåœå–®ï¼šæ˜¯å¦ä½¿ç”¨æ¼²è·Œåœå–®
- æœ€å¤§æŒæœ‰å¤©æ•¸ï¼šæœ€å¤§æŒæœ‰å¤©æ•¸ï¼ˆ1-7å¤©ï¼‰
- å¼·åˆ¶å‡ºå ´ï¼šæ˜¯å¦å¼·åˆ¶å‡ºå ´

**æ³¢æ®µç­–ç•¥åƒæ•¸**ï¼š
- åœåˆ©æ¯”ä¾‹ï¼šåœåˆ©ç™¾åˆ†æ¯”ï¼ˆ1%-100%ï¼‰
- åœææ¯”ä¾‹ï¼šåœæç™¾åˆ†æ¯”ï¼ˆ-100%--1%ï¼‰
- æœ€å¤§æŒæœ‰å¤©æ•¸ï¼šæœ€å¤§æŒæœ‰å¤©æ•¸ï¼ˆ1-365å¤©ï¼‰
- å¼·åˆ¶å‡ºå ´ï¼šæ˜¯å¦å¼·åˆ¶å‡ºå ´
- æ–°é«˜è¨ˆç®—æœŸé–“ï¼šæ–°é«˜è¨ˆç®—æœŸé–“ï¼ˆ5-60å¤©ï¼‰

**è©¢åœˆå…¬å‘Šç­–ç•¥åƒæ•¸**ï¼š
- å…¬å‘Šå»¶é²å¤©æ•¸ï¼šå…¬å‘Šå»¶é²å¤©æ•¸ï¼ˆ0-10å¤©ï¼‰
- éƒ¨ä½å¤§å°æ¯”ä¾‹ï¼šéƒ¨ä½å¤§å°æ¯”ä¾‹ï¼ˆ1%-100%ï¼‰
- æœ€å¤§æŒæœ‰å¤©æ•¸ï¼šæœ€å¤§æŒæœ‰å¤©æ•¸ï¼ˆ1-365å¤©ï¼‰

### è‡ªå‹•ä¸‹å–®åŠŸèƒ½ä½¿ç”¨

#### 1. é¸æ“‡ç­–ç•¥å’Œåƒæ•¸
èˆ‡å›æ¸¬åŠŸèƒ½ç›¸åŒï¼Œé¸æ“‡ç­–ç•¥ä¸¦è¨­å®šåƒæ•¸ã€‚

#### 2. é¸æ“‡åˆ¸å•†
é¸æ“‡æ‚¨ä½¿ç”¨çš„åˆ¸å•†APIã€‚

#### 3. è¨­å®šè³‡é‡‘
è¨­å®šè‡ªå‹•ä¸‹å–®çš„åˆå§‹è³‡é‡‘ã€‚

#### 4. å•Ÿå‹•/åœæ­¢
é»æ“Šå•Ÿå‹•æŒ‰éˆ•é–‹å§‹è‡ªå‹•ä¸‹å–®ï¼Œé»æ“Šåœæ­¢æŒ‰éˆ•åœæ­¢ã€‚

### äº¤æ˜“è¨˜éŒ„ç®¡ç†

#### 1. ç¯©é¸åŠŸèƒ½
- **æ—¥æœŸç¯„åœç¯©é¸**: æŒ‰é€²å ´/å‡ºå ´æ—¥æœŸç¯„åœç¯©é¸
- **è‚¡ç¥¨ä»£ç¢¼ç¯©é¸**: æŒ‰ç‰¹å®šè‚¡ç¥¨ä»£ç¢¼ç¯©é¸
- **ç­–ç•¥é¡å‹ç¯©é¸**: æŒ‰ä½¿ç”¨çš„ç­–ç•¥ç¯©é¸
- **äº¤æ˜“æ–¹å‘ç¯©é¸**: æŒ‰è²·å…¥/è³£å‡ºæ–¹å‘ç¯©é¸
- **æç›Šç¯„åœç¯©é¸**: æŒ‰æç›Šé‡‘é¡ç¯„åœç¯©é¸

#### 2. çµ±è¨ˆåˆ†æ
- **ç¸½äº¤æ˜“æ¬¡æ•¸**: é¡¯ç¤ºç¸½äº¤æ˜“ç­†æ•¸
- **å‹ç‡çµ±è¨ˆ**: è¨ˆç®—ç²åˆ©äº¤æ˜“çš„æ¯”ä¾‹
- **ç¸½å ±é…¬**: é¡¯ç¤ºç¸½é«”æŠ•è³‡å ±é…¬ç‡
- **å¹³å‡å ±é…¬**: è¨ˆç®—å¹³å‡æ¯ç­†äº¤æ˜“çš„å ±é…¬ç‡
- **æœ€å¤§å–®ç­†ç²åˆ©/è™§æ**: é¡¯ç¤ºæœ€å¤§ç²åˆ©å’Œè™§æé‡‘é¡
- **æœ€å¤§å›æ’¤åˆ†æ**: åˆ†ææœ€å¤§å›æ’¤æœŸé–“å’Œå¹…åº¦

#### 3. è©³ç´°äº¤æ˜“è³‡è¨Š
- **é€²å‡ºå ´è³‡è¨Š**: é€²å ´æ—¥æœŸã€å‡ºå ´æ—¥æœŸã€é€²å ´åƒ¹æ ¼ã€å‡ºå ´åƒ¹æ ¼
- **äº¤æ˜“è©³æƒ…**: è‚¡ç¥¨ä»£ç¢¼ã€è‚¡ç¥¨åç¨±ã€äº¤æ˜“æ–¹å‘ã€è‚¡æ•¸
- **æç›Šè¨ˆç®—**: æç›Šé‡‘é¡ã€æç›Šç‡ã€æ‰‹çºŒè²»ã€è­‰äº¤ç¨…ã€æ·¨æç›Š
- **é¢¨éšªæ§åˆ¶**: åœåˆ©åƒ¹ã€åœæåƒ¹ã€å‡ºå ´åŸå› 
- **æŒæœ‰æœŸé–“**: æŒæœ‰å¤©æ•¸ã€ç­–ç•¥åç¨±

#### 4. åŒ¯å‡ºåŠŸèƒ½
- **ExcelåŒ¯å‡º**: å°‡ç¯©é¸çµæœåŒ¯å‡ºç‚ºExcelæª”æ¡ˆ
- **åˆ†é é¡¯ç¤º**: æ”¯æ´å¤§é‡è³‡æ–™çš„åˆ†é é¡¯ç¤º
- **å³æ™‚æ›´æ–°**: è‡ªå‹•é‡æ–°æ•´ç†æœ€æ–°äº¤æ˜“è¨˜éŒ„

### è‚¡ç¥¨é¸æ“‡å™¨ä½¿ç”¨

#### 1. å»ºç«‹é¸è‚¡åˆ—è¡¨
1. é€²å…¥é¸è‚¡ç·¨è¼¯å™¨é é¢ (`/stock-selector`)
2. é»æ“Šã€Œæ–°å»ºé¸è‚¡åˆ—è¡¨ã€æŒ‰éˆ•
3. è¼¸å…¥åˆ—è¡¨åç¨±å’Œæè¿°
4. é¸æ“‡è‚¡ç¥¨ä¾†æºæ–¹å¼

#### 2. ExcelåŒ¯å…¥è‚¡ç¥¨
1. æº–å‚™Excelæª”æ¡ˆï¼ŒåŒ…å«å¿…è¦æ¬„ä½
2. é»æ“Šã€ŒåŒ¯å…¥Excelã€æŒ‰éˆ•
3. é¸æ“‡æª”æ¡ˆä¸¦ä¸Šå‚³
4. ç³»çµ±è‡ªå‹•è§£æä¸¦é¡¯ç¤ºè‚¡ç¥¨åˆ—è¡¨

#### 3. æ¢ä»¶ç¯©é¸è‚¡ç¥¨
1. é»æ“Šã€Œæ¢ä»¶ç¯©é¸ã€æŒ‰éˆ•
2. è¨­å®šç¯©é¸æ¢ä»¶
3. é»æ“Šã€Œå¥—ç”¨æ¢ä»¶ã€
4. æŸ¥çœ‹ç¯©é¸çµæœ

#### 4. åŒ¯å‡ºåˆ°ç­–ç•¥
1. åœ¨é¸è‚¡ç·¨è¼¯å™¨ä¸­é¸æ“‡è¦åŒ¯å‡ºçš„è‚¡ç¥¨
2. é»æ“Šã€ŒåŒ¯å‡ºåˆ°ç­–ç•¥ã€æŒ‰éˆ•
3. é¸æ“‡ç›®æ¨™ç­–ç•¥
4. ç¢ºèªåŒ¯å‡º

### ç³»çµ±è¨­å®š

#### 1. APIè¨­å®š
- **è‚¡ç¥¨è³‡æ–™API**: è¨­å®šè‚¡åƒ¹è³‡æ–™ä¾†æº
- **åˆ¸å•†API**: è¨­å®šè‡ªå‹•ä¸‹å–®åˆ¸å•†

#### 2. äº¤æ˜“åƒæ•¸
- æ‰‹çºŒè²»ç‡å’Œæœ€ä½æ‰‹çºŒè²»
- è­‰äº¤ç¨…ç‡
- é è¨­åˆå§‹è³‡é‡‘
- é¢¨éšªæ§åˆ¶åƒæ•¸

#### 3. ç³»çµ±åƒæ•¸
- æ—¥èªŒç­‰ç´šå’Œæª”æ¡ˆç®¡ç†
- æœƒè©±è¶…æ™‚è¨­å®š
- æª”æ¡ˆä¸Šå‚³é™åˆ¶
- è‡ªå‹•æ¸…ç†è¨­å®š

#### 4. å‚™ä»½è¨­å®š
- è‡ªå‹•å‚™ä»½é »ç‡å’Œæ™‚é–“
- å‚™ä»½ä¿ç•™å¤©æ•¸
- æ‰‹å‹•å‚™ä»½å’Œé‚„åŸ

## ç­–ç•¥é–‹ç™¼

### æ–°å¢ç­–ç•¥
1. ç¹¼æ‰¿ `BaseStrategy` é¡åˆ¥
2. å¯¦ä½œå¿…è¦çš„æ–¹æ³•ï¼š
   - `should_entry()`: é€²å ´æ¢ä»¶
   - `should_exit()`: å‡ºå ´æ¢ä»¶
   - `execute_trade()`: åŸ·è¡Œäº¤æ˜“
3. åœ¨ `config/trading_config.py` ä¸­æ–°å¢é…ç½®
4. åœ¨ `main.py` ä¸­è¨»å†Šç­–ç•¥

### ç­–ç•¥é…ç½®ç¯„ä¾‹
```python
"new_strategy": {
    "name": "æ–°ç­–ç•¥",
    "description": "ç­–ç•¥æè¿°",
    "parameters": {
        "param1": {
            "type": "number",
            "label": "åƒæ•¸1",
            "default": 0.1,
            "min": 0,
            "max": 1,
            "description": "åƒæ•¸èªªæ˜"
        }
    },
    "charts": ["equity_curve", "drawdown"],
    "data_source": "api",
    "stock_source": "excel"
}
```

## ğŸ“Š è³‡æ–™æ ¼å¼

### Excelæª”æ¡ˆæ ¼å¼

#### è‚¡åƒ¹è³‡æ–™æª”æ¡ˆ
| æ¬„ä½ | èªªæ˜ | ç¯„ä¾‹ |
|------|------|------|
| stock_id | è‚¡ç¥¨ä»£ç¢¼ | 2330 |
| date | æ—¥æœŸ | 2024-01-01 |
| open | é–‹ç›¤åƒ¹ | 100.0 |
| high | æœ€é«˜åƒ¹ | 101.0 |
| low | æœ€ä½åƒ¹ | 99.0 |
| close | æ”¶ç›¤åƒ¹ | 100.5 |
| volume | æˆäº¤é‡ | 1000000 |

#### è‚¡ç¥¨æ¸…å–®æª”æ¡ˆ
| æ¬„ä½ | èªªæ˜ | ç¯„ä¾‹ |
|------|------|------|
| stock_id | è‚¡ç¥¨ä»£ç¢¼ | 2330 |
| date | æ—¥æœŸ | 2024-01-01 |

#### é¸è‚¡åˆ—è¡¨æª”æ¡ˆ
| æ¬„ä½åç¨± | èªªæ˜ | ç¯„ä¾‹ |
|---------|------|------|
| stock_id | è‚¡ç¥¨ä»£ç¢¼ | 2330 |
| stock_name | è‚¡ç¥¨åç¨± | å°ç©é›» |
| start_date | é–‹å§‹æ—¥æœŸ | 2024-01-01 |
| end_date | çµæŸæ—¥æœŸ | 2024-12-31 |

## ğŸ”’ å®‰å…¨æ€§

- APIé‡‘é‘°ä½¿ç”¨ç’°å¢ƒè®Šæ•¸æˆ–åŠ å¯†å„²å­˜
- æª”æ¡ˆä¸Šå‚³æœ‰å¤§å°å’Œæ ¼å¼é™åˆ¶
- ç³»çµ±æ”¯æ´HTTPSåŠ å¯†å‚³è¼¸
- å®šæœŸå‚™ä»½é‡è¦è³‡æ–™

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è¦‹å•é¡Œ

#### 1. æ¨¡çµ„å°å…¥éŒ¯èª¤
```bash
# æª¢æŸ¥Pythonç‰ˆæœ¬
python --version

# é‡æ–°å®‰è£ä¾è³´
pip install -r requirements.txt --force-reinstall
```

#### 2. æª”æ¡ˆä¸Šå‚³å¤±æ•—
- æª¢æŸ¥æª”æ¡ˆæ ¼å¼æ˜¯å¦ç‚ºExcel (.xlsx, .xls)
- æª¢æŸ¥æª”æ¡ˆå¤§å°æ˜¯å¦è¶…é50MB
- ç¢ºèªæª”æ¡ˆåŒ…å«å¿…è¦æ¬„ä½

#### 3. APIé€£ç·šå¤±æ•—
- æª¢æŸ¥ç¶²è·¯é€£ç·š
- ç¢ºèªAPIé‡‘é‘°æ˜¯å¦æ­£ç¢º
- æª¢æŸ¥APIæœå‹™æ˜¯å¦æ­£å¸¸

#### 4. å›æ¸¬åŸ·è¡Œå¤±æ•—
- æª¢æŸ¥è³‡æ–™æ ¼å¼æ˜¯å¦æ­£ç¢º
- ç¢ºèªç­–ç•¥åƒæ•¸æ˜¯å¦åˆç†
- æŸ¥çœ‹ç³»çµ±æ—¥èªŒæª”æ¡ˆ

#### 5. Jupyterç·¨è¼¯å™¨å•é¡Œ
- æª¢æŸ¥ç¨‹å¼ç¢¼èªæ³•æ˜¯å¦æ­£ç¢º
- ç¢ºèªä½¿ç”¨çš„æ¨¡çµ„åœ¨æ”¯æ´åˆ—è¡¨ä¸­
- é¿å…åŸ·è¡Œéæ–¼è¤‡é›œçš„ç¨‹å¼ç¢¼

#### 6. äº¤æ˜“è¨˜éŒ„å•é¡Œ
- æª¢æŸ¥ç¯©é¸æ¢ä»¶æ˜¯å¦æ­£ç¢ºè¨­å®š
- ç¢ºèªäº¤æ˜“è¨˜éŒ„è³‡æ–™æ˜¯å¦å®Œæ•´
- æª¢æŸ¥ExcelåŒ¯å‡ºåŠŸèƒ½æ˜¯å¦æ­£å¸¸

#### 7. é¸è‚¡åŠŸèƒ½å•é¡Œ
- æª¢æŸ¥Excelæª”æ¡ˆæ ¼å¼æ˜¯å¦ç¬¦åˆè¦æ±‚
- ç¢ºèªè‚¡ç¥¨ä»£ç¢¼æ˜¯å¦æ­£ç¢º
- æª¢æŸ¥é¸è‚¡åˆ—è¡¨æ˜¯å¦æˆåŠŸå»ºç«‹

### æ—¥èªŒæª”æ¡ˆ
ç³»çµ±æ—¥èªŒä½æ–¼ `logs/` ç›®éŒ„ä¸‹ï¼ŒåŒ…å«:
- `app.log`: æ‡‰ç”¨ç¨‹å¼æ—¥èªŒ
- `error.log`: éŒ¯èª¤æ—¥èªŒ
- `access.log`: å­˜å–æ—¥èªŒ

## ğŸ¤ è²¢ç»æŒ‡å—

1. Fork å°ˆæ¡ˆ
2. å»ºç«‹åŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤è®Šæ›´ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. é–‹å•Ÿ Pull Request

## ğŸ“„ æˆæ¬Šæ¢æ¬¾

æœ¬å°ˆæ¡ˆæ¡ç”¨ MIT æˆæ¬Šæ¢æ¬¾ - è©³è¦‹ [LICENSE](LICENSE) æª”æ¡ˆ

## ğŸ“ æ”¯æ´

å¦‚æœ‰å•é¡Œæˆ–å»ºè­°ï¼Œè«‹:
1. æŸ¥çœ‹ [Issues](../../issues) é é¢
2. å»ºç«‹æ–°çš„ Issue
3. è¯ç¹«é–‹ç™¼åœ˜éšŠ

## ğŸ”„ æ›´æ–°æ—¥èªŒ

### v3.0.0 (æœ€æ–°)
- æ–°å¢ Jupyter é¢¨æ ¼ç­–ç•¥ç·¨è¼¯å™¨
- æ–°å¢å¿«å–ç³»çµ±
- æ–°å¢è‡ªå®šç¾©ç­–ç•¥ç³»çµ±
- æ–°å¢è³‡æ–™é è¦½ç³»çµ±
- æ–°å¢è‚¡ç¥¨é¸æ“‡å™¨åŠŸèƒ½
- æ”¹å–„ç­–ç•¥ç·¨è¼¯å™¨ä½¿ç”¨è€…é«”é©—
- æ–°å¢å®Œæ•´çš„åƒæ•¸è¨­å®šç³»çµ±
- æ”¯æ´å…±ç”¨åƒæ•¸ï¼ˆæ‰‹çºŒè²»ã€è­‰äº¤ç¨…ã€äº¤æ˜“è‚¡æ•¸ï¼‰
- æ–°å¢é€²å ´/å‡ºå ´æ¢ä»¶é¸æ“‡
- æ–°å¢åœåˆ©/åœæé–‹é—œé¸é …
- æ–°å¢æ¼²è·Œåœé™åˆ¶é¸é …
- æ”¹å–„åƒæ•¸é¡¯ç¤ºæ ¼å¼ï¼ˆä½¿ç”¨ç™¾åˆ†æ¯”ï¼‰
- æ›´æ–°æ‰€æœ‰ç­–ç•¥çš„åƒæ•¸é…ç½®
- æ–°å¢å®Œæ•´çš„åƒæ•¸æ¸¬è©¦

### v2.0.0
- æ–°å¢å®Œæ•´çš„åƒæ•¸è¨­å®šç³»çµ±
- æ”¯æ´å…±ç”¨åƒæ•¸ï¼ˆæ‰‹çºŒè²»ã€è­‰äº¤ç¨…ã€äº¤æ˜“è‚¡æ•¸ï¼‰
- æ–°å¢é€²å ´/å‡ºå ´æ¢ä»¶é¸æ“‡
- æ–°å¢åœåˆ©/åœæé–‹é—œé¸é …
- æ–°å¢æ¼²è·Œåœé™åˆ¶é¸é …
- æ”¹å–„åƒæ•¸é¡¯ç¤ºæ ¼å¼ï¼ˆä½¿ç”¨ç™¾åˆ†æ¯”ï¼‰
- æ›´æ–°æ‰€æœ‰ç­–ç•¥çš„åƒæ•¸é…ç½®
- æ–°å¢å®Œæ•´çš„åƒæ•¸æ¸¬è©¦

### v1.0.0
- åˆå§‹ç‰ˆæœ¬
- æ”¯æ´åŸºæœ¬å›æ¸¬åŠŸèƒ½
- æ”¯æ´Excelæª”æ¡ˆä¸Šå‚³
- æ”¯æ´å¤šåŸ·è¡Œç·’è™•ç†

## ç³»çµ±ç‰¹è‰²

### ğŸš€ é«˜æ•ˆèƒ½å¤šåŸ·è¡Œç·’è™•ç†
- **ä¸¦è¡Œå›æ¸¬**: æ”¯æ´å¤šåŸ·è¡Œç·’ä¸¦è¡Œè™•ç†å¤šè‚¡ç¥¨å›æ¸¬ï¼Œå¤§å¹…æå‡è™•ç†é€Ÿåº¦
- **æ™ºèƒ½ç·šç¨‹ç®¡ç†**: è‡ªå‹•èª¿æ•´ç·šç¨‹æ•¸é‡ï¼Œé¿å…éåº¦ä¸¦è¡Œé€ æˆç³»çµ±è² è¼‰
- **å®¹éŒ¯è™•ç†**: å–®ä¸€è‚¡ç¥¨è™•ç†å¤±æ•—ä¸å½±éŸ¿å…¶ä»–è‚¡ç¥¨çš„å›æ¸¬åŸ·è¡Œ
- **æ•ˆèƒ½æå‡**: è™•ç†100æ”¯è‚¡ç¥¨æ™‚ï¼Œæ•ˆèƒ½å¯æå‡5-10å€

### ğŸ“Š å¤šç­–ç•¥æ”¯æ´
- **ç•¶æ²–ç­–ç•¥**: é©åˆçŸ­ç·šäº¤æ˜“ï¼Œæ—¥å…§é€²å‡º
- **æ³¢æ®µç­–ç•¥**: é©åˆä¸­æœŸæŒæœ‰ï¼ŒåŒ…å«é™¤æ¬Šæ¯èª¿æ•´
- **è©¢åœˆå…¬å‘Šç­–ç•¥**: å°ˆé–€è™•ç†è©¢åœˆå…¬å‘Šç›¸é—œäº¤æ˜“
- **è‡ªå®šç¾©ç­–ç•¥**: æ”¯æ´ç”¨æˆ¶è‡ªå®šç¾©ç­–ç•¥é–‹ç™¼
- **ç­–ç•¥æ“´å±•**: åŸºæ–¼ `BaseStrategy` é¡åˆ¥ï¼Œæ˜“æ–¼æ–°å¢è‡ªå®šç¾©ç­–ç•¥

### ğŸ“ˆ å¤šè³‡æ–™ä¾†æº
- **APIè³‡æ–™**: æ”¯æ´å¤šç¨®è‚¡ç¥¨APIè³‡æ–™ä¾†æº
- **Excelä¸Šå‚³**: æ”¯æ´Excelæª”æ¡ˆä¸Šå‚³ï¼Œè‡ªå‹•è­˜åˆ¥æ¬„ä½æ ¼å¼
- **ç¯„ä¾‹è³‡æ–™**: æä¾›å¤šç¨®é è¨­è³‡æ–™é¡å‹ä¾›æ¸¬è©¦ä½¿ç”¨
- **æ¬„ä½æ˜ å°„**: æ™ºèƒ½è­˜åˆ¥ä¸­æ–‡/è‹±æ–‡æ¬„ä½åç¨±
- **è³‡æ–™é©—è­‰**: è‡ªå‹•é©—è­‰è³‡æ–™å®Œæ•´æ€§å’Œæ ¼å¼æ­£ç¢ºæ€§

### ğŸ’» Jupyter é¢¨æ ¼é–‹ç™¼ç’°å¢ƒ
- **äº’å‹•å¼ç·¨è¼¯**: æ”¯æ´å–®å…ƒæ ¼ç·¨è¼¯å’Œå³æ™‚åŸ·è¡Œ
- **å³æ™‚ç¨‹å¼ç¢¼åŸ·è¡Œ**: ç¨‹å¼ç¢¼ç«‹å³åœ¨å¾Œç«¯åŸ·è¡Œä¸¦é¡¯ç¤ºçµæœ
- **åœ–è¡¨é¡¯ç¤º**: æ”¯æ´ Matplotlibã€Seabornã€Plotly åœ–è¡¨
- **è³‡æ–™åˆ†æ**: å…§å»º Pandasã€Polarsã€NumPy ç­‰è³‡æ–™åˆ†æå·¥å…·
- **è®Šæ•¸å…±äº«**: å–®å…ƒæ ¼é–“è®Šæ•¸ä¿æŒç‹€æ…‹
- **ç­†è¨˜æœ¬ç®¡ç†**: æ”¯æ´å„²å­˜ã€è¼‰å…¥ã€åŒ¯å‡ºç­†è¨˜æœ¬

### ğŸ—„ï¸ æ™ºèƒ½å¿«å–ç³»çµ±
- **é›™å±¤å¿«å–**: è¨˜æ†¶é«”å¿«å– + æª”æ¡ˆå¿«å–
- **è‡ªå‹•ç®¡ç†**: è¨˜æ†¶é«”ä¸è¶³æ™‚è‡ªå‹•æ¸…ç†æœ€èˆŠçš„è³‡æ–™
- **TTL æ©Ÿåˆ¶**: å¯è¨­å®šå¿«å–å­˜æ´»æ™‚é–“
- **çµ±è¨ˆè³‡è¨Š**: æä¾›è©³ç´°çš„å¿«å–ä½¿ç”¨çµ±è¨ˆ
- **API æ•´åˆ**: èˆ‡ StockAPI ç„¡ç¸«æ•´åˆ

### ğŸ¯ å‹•æ…‹åƒæ•¸é…ç½®
- **åƒæ•¸ä¾†æº**: æ”¯æ´æ‰‹å‹•è¼¸å…¥ã€Excelä¸Šå‚³ã€APIå–å¾—ç­‰å¤šç¨®åƒæ•¸ä¾†æº
- **ç­–ç•¥å°ˆç”¨**: ä¸åŒç­–ç•¥é¡¯ç¤ºå°æ‡‰çš„åƒæ•¸è¨­å®š
- **å³æ™‚é©—è­‰**: åƒæ•¸è¼¸å…¥æ™‚å³æ™‚é©—è­‰æ ¼å¼å’Œç¯„åœ
- **æ ¼å¼èªªæ˜**: æä¾›è©³ç´°çš„Excelæ ¼å¼èªªæ˜å’Œç¯„ä¾‹

### ğŸ“Š å®Œæ•´äº¤æ˜“è¨˜éŒ„ç³»çµ±
- **å¤šç¶­åº¦ç¯©é¸**: æ”¯æ´æ—¥æœŸã€è‚¡ç¥¨ã€ç­–ç•¥ã€æ–¹å‘ç­‰å¤šç¨®ç¯©é¸æ¢ä»¶
- **çµ±è¨ˆåˆ†æ**: æä¾›å‹ç‡ã€å ±é…¬ç‡ã€æœ€å¤§å›æ’¤ç­‰é—œéµæŒ‡æ¨™
- **è©³ç´°è³‡è¨Š**: åŒ…å«é€²å‡ºå ´åƒ¹æ ¼ã€æç›Šè¨ˆç®—ã€é¢¨éšªæ§åˆ¶ç­‰å®Œæ•´è³‡è¨Š
- **åŒ¯å‡ºåŠŸèƒ½**: æ”¯æ´ExcelåŒ¯å‡ºå’Œåˆ†é é¡¯ç¤º

### ğŸ¯ æ™ºèƒ½é¸è‚¡ç³»çµ±
- **å¤šä¾†æºæ”¯æ´**: ExcelåŒ¯å…¥ã€æ‰‹å‹•æ–°å¢ã€æ¢ä»¶ç¯©é¸
- **åˆ—è¡¨ç®¡ç†**: å»ºç«‹ã€ç·¨è¼¯ã€åˆªé™¤é¸è‚¡åˆ—è¡¨
- **ç­–ç•¥æ•´åˆ**: èˆ‡ç­–ç•¥ç·¨è¼¯å™¨ç„¡ç¸«æ•´åˆ
- **æ‰¹é‡æ“ä½œ**: æ”¯æ´æ‰¹é‡æ–°å¢ã€ç§»é™¤è‚¡ç¥¨

---

**æ³¨æ„**: æœ¬ç³»çµ±åƒ…ä¾›å­¸ç¿’å’Œç ”ç©¶ä½¿ç”¨ï¼Œå¯¦éš›äº¤æ˜“è«‹è¬¹æ…è©•ä¼°é¢¨éšªã€‚

---

# ğŸ“š è©³ç´°åŠŸèƒ½èªªæ˜

## Jupyter é¢¨æ ¼ç­–ç•¥ç·¨è¼¯å™¨

### æ¦‚è¿°

ç­–ç•¥ç·¨è¼¯å™¨ç¾åœ¨æ”¯æ´ Jupyter é¢¨æ ¼çš„äº’å‹•å¼ç¨‹å¼ç¢¼ç·¨è¼¯ï¼Œæä¾›å³æ™‚ç¨‹å¼ç¢¼åŸ·è¡Œã€åœ–è¡¨é¡¯ç¤ºå’Œè³‡æ–™åˆ†æåŠŸèƒ½ã€‚

### ä¸»è¦åŠŸèƒ½

#### 1. åˆ‡æ›ç·¨è¼¯æ¨¡å¼
- **å‚³çµ±æ¨¡å¼**: åŸæœ‰çš„ç¨‹å¼ç¢¼ç·¨è¼¯å™¨ï¼Œé©åˆç·¨å¯«å®Œæ•´çš„ç­–ç•¥ç¨‹å¼ç¢¼
- **Jupyter æ¨¡å¼**: äº’å‹•å¼å–®å…ƒæ ¼ç·¨è¼¯å™¨ï¼Œé©åˆæ¢ç´¢æ€§è³‡æ–™åˆ†æå’Œç­–ç•¥é–‹ç™¼

#### 2. Jupyter å–®å…ƒæ ¼åŠŸèƒ½
- **æ–°å¢å–®å…ƒæ ¼**: é»æ“Šã€Œæ–°å¢å–®å…ƒæ ¼ã€æŒ‰éˆ•æˆ–ä½¿ç”¨ Ctrl+Enter
- **åŸ·è¡Œå–®å…ƒæ ¼**: é»æ“ŠåŸ·è¡ŒæŒ‰éˆ•æˆ–ä½¿ç”¨ Shift+Enter
- **åˆªé™¤å–®å…ƒæ ¼**: é»æ“Šåˆªé™¤æŒ‰éˆ•
- **é‡æ–°ç·¨è™Ÿ**: è‡ªå‹•é‡æ–°ç·¨è™Ÿå–®å…ƒæ ¼

#### 3. ç¨‹å¼ç¢¼åŸ·è¡Œ
- **å³æ™‚åŸ·è¡Œ**: ç¨‹å¼ç¢¼ç«‹å³åœ¨å¾Œç«¯åŸ·è¡Œ
- **è¼¸å‡ºæ•ç²**: è‡ªå‹•æ•ç² print è¼¸å‡ºã€éŒ¯èª¤è¨Šæ¯å’Œåœ–è¡¨
- **ç‹€æ…‹æŒ‡ç¤º**: å–®å…ƒæ ¼æœƒé¡¯ç¤ºåŸ·è¡Œç‹€æ…‹ï¼ˆåŸ·è¡Œä¸­ã€æˆåŠŸã€éŒ¯èª¤ï¼‰

#### 4. æ”¯æ´çš„è¼¸å‡ºé¡å‹
- **æ–‡å­—è¼¸å‡º**: print èªå¥çš„è¼¸å‡º
- **éŒ¯èª¤è¨Šæ¯**: èªæ³•éŒ¯èª¤å’ŒåŸ·è¡ŒéŒ¯èª¤
- **DataFrame é¡¯ç¤º**: Pandas å’Œ Polars DataFrame çš„è¡¨æ ¼é¡¯ç¤º
- **åœ–è¡¨é¡¯ç¤º**: Matplotlib å’Œ Seaborn åœ–è¡¨
- **æ•¸å€¼çµæœ**: è¨ˆç®—çµæœçš„é¡¯ç¤º

### å¯ç”¨æ¨¡çµ„

#### åŸºæœ¬ Python æ¨¡çµ„
- `np` - NumPy æ•¸å€¼è¨ˆç®—
- `pd` - Pandas è³‡æ–™è™•ç†
- `pl` - Polars é«˜æ•ˆèƒ½è³‡æ–™è™•ç†
- `plt` - Matplotlib ç¹ªåœ–
- `sns` - Seaborn çµ±è¨ˆç¹ªåœ–
- `go` - Plotly äº’å‹•åœ–è¡¨

#### ç­–ç•¥å·¥å…·æ¨¡çµ„
- `PriceUtils` - åƒ¹æ ¼è¨ˆç®—å·¥å…·
- `Utils` - é€šç”¨å·¥å…·é¡åˆ¥
- `TradeRecord` - äº¤æ˜“è¨˜éŒ„è³‡æ–™é¡åˆ¥
- `HoldingPosition` - æŒæœ‰éƒ¨ä½è³‡æ–™é¡åˆ¥

### å¿«æ·éµ

- **Shift+Enter**: åŸ·è¡Œç•¶å‰å–®å…ƒæ ¼
- **Ctrl+Enter**: åŸ·è¡Œç•¶å‰å–®å…ƒæ ¼ä¸¦æ–°å¢æ–°å–®å…ƒæ ¼
- **Tab**: è‡ªå‹•ç¸®æ’

### ç¯„ä¾‹ç¨‹å¼ç¢¼

#### åŸºæœ¬è³‡æ–™åˆ†æ
```python
# è¼‰å…¥ç¯„ä¾‹è³‡æ–™
import pandas as pd
import numpy as np

# ç”Ÿæˆè‚¡ç¥¨è³‡æ–™
dates = pd.date_range('2024-01-01', '2024-12-31', freq='D')
close_prices = 100 + np.cumsum(np.random.normal(0, 0.5, len(dates)))
df = pd.DataFrame({
    'date': dates,
    'close': close_prices,
    'volume': np.random.uniform(1000000, 5000000, len(dates))
})

print(f"è¼‰å…¥ {len(df)} ç­†è‚¡ç¥¨è³‡æ–™")
df.head()
```

#### æŠ€è¡“æŒ‡æ¨™è¨ˆç®—
```python
# è¨ˆç®—ç§»å‹•å¹³å‡ç·š
df['ma5'] = df['close'].rolling(5).mean()
df['ma20'] = df['close'].rolling(20).mean()
df['ma60'] = df['close'].rolling(60).mean()

# è¨ˆç®—æ—¥å ±é…¬ç‡
df['daily_return'] = df['close'].pct_change()

print("æŠ€è¡“æŒ‡æ¨™è¨ˆç®—å®Œæˆ")
df.tail()
```

#### åœ–è¡¨ç¹ªè£½
```python
# ç¹ªè£½è‚¡åƒ¹å’Œç§»å‹•å¹³å‡ç·šåœ–
import matplotlib.pyplot as plt

plt.figure(figsize=(12, 6))
plt.plot(df['date'], df['close'], label='æ”¶ç›¤åƒ¹', linewidth=2)
plt.plot(df['date'], df['ma5'], label='5æ—¥å‡ç·š', alpha=0.7)
plt.plot(df['date'], df['ma20'], label='20æ—¥å‡ç·š', alpha=0.7)
plt.plot(df['date'], df['ma60'], label='60æ—¥å‡ç·š', alpha=0.7)

plt.title('è‚¡ç¥¨åƒ¹æ ¼èˆ‡ç§»å‹•å¹³å‡ç·š', fontsize=14)
plt.xlabel('æ—¥æœŸ')
plt.ylabel('åƒ¹æ ¼')
plt.legend()
plt.grid(True, alpha=0.3)
plt.xticks(rotation=45)
plt.tight_layout()
plt.show()
```

### ç­†è¨˜æœ¬ç®¡ç†

#### å„²å­˜ç­†è¨˜æœ¬
- é»æ“Šã€Œå„²å­˜ç­†è¨˜æœ¬ã€æŒ‰éˆ•å°‡ç­†è¨˜æœ¬å„²å­˜åˆ°æœ¬åœ°ç€è¦½å™¨
- æ”¯æ´é›¢ç·šå„²å­˜å’Œæ¢å¾©

#### åŒ¯å‡ºç­†è¨˜æœ¬
- é»æ“Šã€ŒåŒ¯å‡ºã€æŒ‰éˆ•ä¸‹è¼‰ JSON æ ¼å¼çš„ç­†è¨˜æœ¬æª”æ¡ˆ
- å¯ä»¥èˆ‡å…¶ä»–ç”¨æˆ¶åˆ†äº«ç­†è¨˜æœ¬

#### è¼‰å…¥ç­†è¨˜æœ¬
- æ”¯æ´è¼‰å…¥ä¹‹å‰å„²å­˜çš„ç­†è¨˜æœ¬æª”æ¡ˆ
- è‡ªå‹•æ¢å¾©ç¨‹å¼ç¢¼å’Œè¼¸å‡º

### æ³¨æ„äº‹é …

1. **åŸ·è¡Œç’°å¢ƒ**: ç¨‹å¼ç¢¼åœ¨å¾Œç«¯å®‰å…¨ç’°å¢ƒä¸­åŸ·è¡Œ
2. **è¨˜æ†¶é«”ç®¡ç†**: å¤§å‹è³‡æ–™é›†æœƒè‡ªå‹•æ¸…ç†
3. **éŒ¯èª¤è™•ç†**: èªæ³•éŒ¯èª¤å’ŒåŸ·è¡ŒéŒ¯èª¤æœƒæ¸…æ¥šé¡¯ç¤º
4. **åœ–è¡¨é¡¯ç¤º**: æ”¯æ´ Matplotlib å’Œ Seaborn åœ–è¡¨
5. **è³‡æ–™æŒä¹…æ€§**: å–®å…ƒæ ¼ä¹‹é–“çš„è®Šæ•¸æœƒä¿æŒ

### æœ€ä½³å¯¦è¸

1. **æ¨¡çµ„åŒ–é–‹ç™¼**: å°‡è¤‡é›œé‚è¼¯åˆ†è§£ç‚ºå¤šå€‹å–®å…ƒæ ¼
2. **é€æ­¥æ¸¬è©¦**: é€å€‹å–®å…ƒæ ¼æ¸¬è©¦ç¨‹å¼ç¢¼
3. **åœ–è¡¨é©—è­‰**: ä½¿ç”¨åœ–è¡¨é©—è­‰ç­–ç•¥é‚è¼¯
4. **è¨»è§£èªªæ˜**: åœ¨ç¨‹å¼ç¢¼ä¸­æ·»åŠ æ¸…æ¥šçš„è¨»è§£
5. **å®šæœŸå„²å­˜**: å®šæœŸå„²å­˜ç­†è¨˜æœ¬é¿å…è³‡æ–™éºå¤±

### æ•…éšœæ’é™¤

#### å¸¸è¦‹å•é¡Œ
1. **å–®å…ƒæ ¼ç„¡æ³•åŸ·è¡Œ**: æª¢æŸ¥ç¨‹å¼ç¢¼èªæ³•æ˜¯å¦æ­£ç¢º
2. **åœ–è¡¨ä¸é¡¯ç¤º**: ç¢ºä¿ä½¿ç”¨ `plt.show()` é¡¯ç¤ºåœ–è¡¨
3. **æ¨¡çµ„æ‰¾ä¸åˆ°**: ç¢ºèªä½¿ç”¨çš„æ¨¡çµ„åœ¨æ”¯æ´åˆ—è¡¨ä¸­
4. **åŸ·è¡Œè¶…æ™‚**: é¿å…åŸ·è¡Œéæ–¼è¤‡é›œçš„ç¨‹å¼ç¢¼

#### æ•ˆèƒ½å„ªåŒ–
1. **åˆ†æ‰¹è™•ç†**: å¤§å‹è³‡æ–™é›†åˆ†æ‰¹è™•ç†
2. **è¨˜æ†¶é«”æ¸…ç†**: åŠæ™‚æ¸…ç†ä¸éœ€è¦çš„è®Šæ•¸
3. **åœ–è¡¨å„ªåŒ–**: è¨­å®šé©ç•¶çš„åœ–è¡¨å¤§å°å’Œè§£æåº¦

## ç¨‹å¼ç¢¼ç·¨è¼¯å™¨åŠŸèƒ½

### æ¦‚è¿°

ç­–ç•¥ç·¨è¼¯å™¨ç¾åœ¨æ•´åˆäº†å°ˆæ¥­çš„ç¨‹å¼ç¢¼ç·¨è¼¯å™¨åŠŸèƒ½ï¼ŒåŸºæ–¼ CodeMirror 5.65.2 å¯¦ç¾ï¼Œæä¾›é¡ä¼¼ Python IDE çš„é–‹ç™¼é«”é©—ã€‚ç·¨è¼¯å™¨æ”¯æ´èªæ³•é«˜äº®ã€è‡ªå‹•ç¸®æ’ã€ç¨‹å¼ç¢¼æç¤ºã€æœå°‹æ›¿æ›ç­‰å°ˆæ¥­åŠŸèƒ½ã€‚

### ä¸»è¦åŠŸèƒ½

#### 1. èªæ³•é«˜äº®
- **Python èªæ³•æ”¯æ´**ï¼šå®Œæ•´çš„ Python èªæ³•é«˜äº®
- **å¤šä¸»é¡Œé¸æ“‡**ï¼šæ”¯æ´ Eclipseã€Monokaiã€Dracula ç­‰ä¸»é¡Œ
- **å³æ™‚é«˜äº®**ï¼šè¼¸å…¥æ™‚å³æ™‚é¡¯ç¤ºèªæ³•é«˜äº®

#### 2. è‡ªå‹•ç¸®æ’
- **æ™ºèƒ½ç¸®æ’**ï¼šè¼¸å…¥ `:` å¾ŒæŒ‰ Enter è‡ªå‹•å¢åŠ ç¸®æ’
- **Tab éµæ”¯æ´**ï¼šTab éµæ’å…¥ 4 å€‹ç©ºæ ¼
- **é¸å€ç¸®æ’**ï¼šé¸ä¸­å¤šè¡Œå¯æ‰¹é‡ç¸®æ’
- **è‡ªå‹•å°é½Š**ï¼šæ‹¬è™Ÿã€å¼•è™Ÿè‡ªå‹•é…å°

#### 3. ç¨‹å¼ç¢¼æç¤º
- **è‡ªå‹•å®Œæˆ**ï¼šCtrl+Space è§¸ç™¼è‡ªå‹•å®Œæˆ
- **å‡½æ•¸æç¤º**ï¼šé¡¯ç¤ºå‡½æ•¸åƒæ•¸å’Œèªªæ˜
- **è®Šæ•¸æç¤º**ï¼šæ™ºèƒ½è®Šæ•¸åç¨±å»ºè­°

#### 4. ç¨‹å¼ç¢¼æ‘ºç–Š
- **å€å¡Šæ‘ºç–Š**ï¼šå¯æ‘ºç–Šå‡½æ•¸ã€é¡åˆ¥ã€è¨»è§£å€å¡Š
- **è¡Œè™Ÿé¡¯ç¤º**ï¼šé¡¯ç¤ºè¡Œè™Ÿä¾¿æ–¼å®šä½
- **æ‘ºç–ŠæŒ‡ç¤ºå™¨**ï¼šè¦–è¦ºåŒ–æ‘ºç–Šç‹€æ…‹

#### 5. æœå°‹èˆ‡æ›¿æ›
- **å¿«é€Ÿæœå°‹**ï¼šCtrl+F é–‹å•Ÿæœå°‹
- **æ›¿æ›åŠŸèƒ½**ï¼šCtrl+H é–‹å•Ÿæ›¿æ›
- **è·³è½‰è¡Œè™Ÿ**ï¼šå¿«é€Ÿè·³è½‰åˆ°æŒ‡å®šè¡Œ

#### 6. ç¨‹å¼ç¢¼æ ¼å¼åŒ–
- **ä¸€éµæ ¼å¼åŒ–**ï¼šè‡ªå‹•èª¿æ•´ç¸®æ’å’Œç©ºè¡Œ
- **èªæ³•æª¢æŸ¥**ï¼šæª¢æŸ¥æ‹¬è™Ÿé…å°å’ŒåŸºæœ¬èªæ³•
- **ç¨‹å¼ç¢¼æ¸…ç†**ï¼šç§»é™¤å¤šé¤˜ç©ºæ ¼å’Œç©ºè¡Œ

#### 7. å…¨è¢å¹•ç·¨è¼¯
- **å…¨è¢å¹•æ¨¡å¼**ï¼šå°ˆæ³¨ç¨‹å¼ç¢¼ç·¨è¼¯
- **å¿«é€Ÿåˆ‡æ›**ï¼šä¸€éµé€²å…¥/é€€å‡ºå…¨è¢å¹•
- **è‡ªé©æ‡‰å¤§å°**ï¼šè‡ªå‹•èª¿æ•´ç·¨è¼¯å™¨å¤§å°

### æŠ€è¡“æ¶æ§‹

#### å‰ç«¯æŠ€è¡“
- **CodeMirror 5.65.2**ï¼šå°ˆæ¥­ç¨‹å¼ç¢¼ç·¨è¼¯å™¨
- **Python Mode**ï¼šPython èªæ³•æ”¯æ´
- **å¤šç¨® Addon**ï¼šåŠŸèƒ½æ“´å±•æ¨¡çµ„

#### ç·¨è¼¯å™¨é…ç½®
```javascript
codeEditor = CodeMirror.fromTextArea(textarea, {
    mode: 'python',                    // Python èªæ³•æ¨¡å¼
    theme: 'eclipse',                  // é è¨­ä¸»é¡Œ
    lineNumbers: true,                 // é¡¯ç¤ºè¡Œè™Ÿ
    lineWrapping: true,                // è‡ªå‹•æ›è¡Œ
    indentUnit: 4,                     // ç¸®æ’å–®ä½
    tabSize: 4,                        // Tab å¤§å°
    indentWithTabs: false,             // ä½¿ç”¨ç©ºæ ¼ç¸®æ’
    autoCloseBrackets: true,           // è‡ªå‹•é—œé–‰æ‹¬è™Ÿ
    matchBrackets: true,               // æ‹¬è™Ÿé…å°é«˜äº®
    foldGutter: true,                  // æ‘ºç–ŠåŠŸèƒ½
    gutters: ['CodeMirror-linenumbers', 'CodeMirror-foldgutter']
});
```

#### å¿«æ·éµè¨­å®š
- **Tab**ï¼šæ’å…¥ç¸®æ’æˆ–é¸å€ç¸®æ’
- **Enter**ï¼šæ™ºèƒ½æ›è¡Œå’Œç¸®æ’
- **Ctrl+Space**ï¼šè§¸ç™¼è‡ªå‹•å®Œæˆ
- **Ctrl+F**ï¼šé–‹å•Ÿæœå°‹
- **Ctrl+H**ï¼šé–‹å•Ÿæ›¿æ›
- **Ctrl+/**ï¼šè¨»è§£/å–æ¶ˆè¨»è§£

### ä½¿ç”¨æ–¹å¼

#### 1. åŸºæœ¬ç·¨è¼¯
1. é€²å…¥ç­–ç•¥ç·¨è¼¯å™¨é é¢
2. ç¨‹å¼ç¢¼ç·¨è¼¯å™¨æœƒè‡ªå‹•è¼‰å…¥é è¨­æ¨¡æ¿
3. é–‹å§‹è¼¸å…¥ç¨‹å¼ç¢¼ï¼Œäº«å—èªæ³•é«˜äº®å’Œè‡ªå‹•ç¸®æ’

#### 2. è‡ªå‹•ç¸®æ’ç¯„ä¾‹
```python
# è¼¸å…¥ä»¥ä¸‹ç¨‹å¼ç¢¼æ™‚æœƒè‡ªå‹•ç¸®æ’
if a == 1:  # è¼¸å…¥ : å¾ŒæŒ‰ Enter
    print("a is 1")  # è‡ªå‹•ç¸®æ’ 4 å€‹ç©ºæ ¼
    if b == 2:  # å†æ¬¡ç¸®æ’
        print("b is 2")  # å†ç¸®æ’ 4 å€‹ç©ºæ ¼
```

#### 3. ç¨‹å¼ç¢¼æ ¼å¼åŒ–
1. é»æ“Šã€Œæ ¼å¼åŒ–ã€æŒ‰éˆ•
2. ç³»çµ±è‡ªå‹•èª¿æ•´ç¸®æ’å’Œç©ºè¡Œ
3. æª¢æŸ¥ä¸¦ä¿®æ­£åŸºæœ¬èªæ³•å•é¡Œ

#### 4. èªæ³•é©—è­‰
1. é»æ“Šã€Œé©—è­‰èªæ³•ã€æŒ‰éˆ•
2. ç³»çµ±æª¢æŸ¥æ‹¬è™Ÿé…å°å’Œç¸®æ’
3. é¡¯ç¤ºé©—è­‰çµæœå’ŒéŒ¯èª¤è¨Šæ¯

#### 5. å…¨è¢å¹•ç·¨è¼¯
1. é»æ“Šã€Œå…¨è¢å¹•ã€æŒ‰éˆ•
2. ç·¨è¼¯å™¨é€²å…¥å…¨è¢å¹•æ¨¡å¼
3. å°ˆæ³¨æ–¼ç¨‹å¼ç¢¼ç·¨è¼¯
4. é»æ“Šã€Œé€€å‡ºå…¨è¢å¹•ã€è¿”å›

### ç¨‹å¼ç¢¼æ¨¡æ¿

#### é è¨­ç­–ç•¥æ¨¡æ¿
```python
class MyStrategy:
    def __init__(self, parameters):
        self.parameters = parameters
        self.strategy_name = "æˆ‘çš„ç­–ç•¥"
        self.strategy_description = "è‡ªå®šç¾©äº¤æ˜“ç­–ç•¥"
    
    def execute(self, data):
        """
        ç­–ç•¥åŸ·è¡Œé‚è¼¯
        data: è‚¡ç¥¨è³‡æ–™ (polars DataFrame)
        """
        # åœ¨é€™è£¡å¯¦ä½œæ‚¨çš„ç­–ç•¥é‚è¼¯
        result = data.clone()
        
        # ç¯„ä¾‹ï¼šç°¡å–®çš„ç§»å‹•å¹³å‡ç­–ç•¥
        if len(data) > 20:
            result = result.with_columns([
                pl.col('close').rolling_mean(window_size=20).alias('ma20'),
                pl.col('close').rolling_mean(window_size=5).alias('ma5')
            ])
            
            # ç”¢ç”Ÿè²·è³£è¨Šè™Ÿ
            result = result.with_columns([
                pl.when(pl.col('ma5') > pl.col('ma20'))
                .then(1)  # è²·å…¥è¨Šè™Ÿ
                .otherwise(0).alias('signal')
            ])
        
        return result
    
    def get_parameters(self):
        """å–å¾—ç­–ç•¥åƒæ•¸"""
        return self.parameters
```

### ç·¨è¼¯å™¨ä¸»é¡Œ

#### å¯ç”¨ä¸»é¡Œ
1. **Eclipse**ï¼šæ·ºè‰²ä¸»é¡Œï¼Œé©åˆæ—¥é–“ä½¿ç”¨
2. **Monokai**ï¼šæ·±è‰²ä¸»é¡Œï¼Œé©åˆå¤œé–“ä½¿ç”¨
3. **Dracula**ï¼šæ·±è‰²ä¸»é¡Œï¼Œç¾ä»£åŒ–è¨­è¨ˆ

#### ä¸»é¡Œåˆ‡æ›
- å¯åœ¨ç·¨è¼¯å™¨è¨­å®šä¸­åˆ‡æ›ä¸»é¡Œ
- ä¸»é¡Œè¨­å®šæœƒè‡ªå‹•ä¿å­˜
- æ”¯æ´è‡ªå®šç¾©ä¸»é¡Œ

### ç¨‹å¼ç¢¼é©—è­‰

#### é©—è­‰é …ç›®
1. **æ‹¬è™Ÿé…å°**ï¼šæª¢æŸ¥ `()`, `[]`, `{}` é…å°
2. **ç¸®æ’æª¢æŸ¥**ï¼šæª¢æŸ¥ Python ç¸®æ’è¦å‰‡
3. **åŸºæœ¬èªæ³•**ï¼šæª¢æŸ¥å¸¸è¦‹èªæ³•éŒ¯èª¤
4. **ç¨‹å¼ç¢¼çµæ§‹**ï¼šæª¢æŸ¥é¡åˆ¥å’Œå‡½æ•¸å®šç¾©

#### éŒ¯èª¤æç¤º
- å³æ™‚é¡¯ç¤ºéŒ¯èª¤ä½ç½®
- æä¾›éŒ¯èª¤èªªæ˜å’Œå»ºè­°
- æ”¯æ´éŒ¯èª¤å¿«é€Ÿä¿®å¾©

### æ•ˆèƒ½å„ªåŒ–

#### ç·¨è¼¯å™¨æ•ˆèƒ½
- **è™›æ“¬åŒ–æ¸²æŸ“**ï¼šåªæ¸²æŸ“å¯è¦‹å€åŸŸ
- **å»¶é²è¼‰å…¥**ï¼šæŒ‰éœ€è¼‰å…¥åŠŸèƒ½æ¨¡çµ„
- **è¨˜æ†¶é«”ç®¡ç†**ï¼šè‡ªå‹•æ¸…ç†æœªä½¿ç”¨è³‡æº

#### å¤§å‹æª”æ¡ˆæ”¯æ´
- **åˆ†é è¼‰å…¥**ï¼šæ”¯æ´å¤§å‹ç¨‹å¼ç¢¼æª”æ¡ˆ
- **å¢é‡æ›´æ–°**ï¼šåªæ›´æ–°è®Šæ›´çš„éƒ¨åˆ†
- **èƒŒæ™¯è™•ç†**ï¼šéé˜»å¡å¼èªæ³•æª¢æŸ¥

### è‡ªå®šç¾©è¨­å®š

#### ç·¨è¼¯å™¨åå¥½è¨­å®š
```javascript
// è‡ªå®šç¾©ç·¨è¼¯å™¨è¨­å®š
const editorConfig = {
    fontSize: '14px',           // å­—é«”å¤§å°
    fontFamily: 'Fira Code',    // å­—é«”
    tabSize: 4,                 // Tab å¤§å°
    theme: 'eclipse',           // ä¸»é¡Œ
    lineNumbers: true,          // è¡Œè™Ÿ
    autoCloseBrackets: true,    // è‡ªå‹•é—œé–‰æ‹¬è™Ÿ
    matchBrackets: true,        // æ‹¬è™Ÿé…å°
    foldGutter: true,           // æ‘ºç–ŠåŠŸèƒ½
    lineWrapping: true          // è‡ªå‹•æ›è¡Œ
};
```

#### å¿«æ·éµè‡ªå®šç¾©
```javascript
// è‡ªå®šç¾©å¿«æ·éµ
extraKeys: {
    'Ctrl-S': function(cm) {
        // è‡ªå®šç¾©å„²å­˜åŠŸèƒ½
        saveStrategy();
    },
    'Ctrl-R': function(cm) {
        // è‡ªå®šç¾©åŸ·è¡ŒåŠŸèƒ½
        testStrategy();
    }
}
```

### éŒ¯èª¤è™•ç†

#### å¸¸è¦‹å•é¡Œ
1. **ç·¨è¼¯å™¨ç„¡æ³•è¼‰å…¥**ï¼šæª¢æŸ¥ç¶²è·¯é€£ç·šå’Œ CDN è³‡æº
2. **èªæ³•é«˜äº®ç•°å¸¸**ï¼šé‡æ–°æ•´ç†é é¢æˆ–æ¸…é™¤å¿«å–
3. **è‡ªå‹•ç¸®æ’å¤±æ•ˆ**ï¼šæª¢æŸ¥ç·¨è¼¯å™¨è¨­å®š
4. **ç¨‹å¼ç¢¼é©—è­‰éŒ¯èª¤**ï¼šæª¢æŸ¥ Python èªæ³•

#### æ•…éšœæ’é™¤
- æª¢æŸ¥ç€è¦½å™¨æ§åˆ¶å°éŒ¯èª¤è¨Šæ¯
- ç¢ºèª CodeMirror è³‡æºè¼‰å…¥æˆåŠŸ
- é©—è­‰ç·¨è¼¯å™¨åˆå§‹åŒ–ç‹€æ…‹
- æª¢æŸ¥ JavaScript éŒ¯èª¤

### æœªä¾†æ“´å±•

#### è¨ˆåŠƒåŠŸèƒ½
1. **æ™ºèƒ½ç¨‹å¼ç¢¼è£œå…¨**ï¼šåŸºæ–¼ä¸Šä¸‹æ–‡çš„è£œå…¨
2. **ç¨‹å¼ç¢¼ç‰‡æ®µ**ï¼šé è¨­ç¨‹å¼ç¢¼ç‰‡æ®µ
3. **å³æ™‚éŒ¯èª¤æª¢æŸ¥**ï¼šè¼¸å…¥æ™‚å³æ™‚æª¢æŸ¥
4. **ç¨‹å¼ç¢¼é‡æ§‹**ï¼šè‡ªå‹•é‡æ§‹å·¥å…·
5. **ç‰ˆæœ¬æ§åˆ¶æ•´åˆ**ï¼šGit æ•´åˆåŠŸèƒ½

#### é€²éšåŠŸèƒ½
1. **å¤šæª”æ¡ˆç·¨è¼¯**ï¼šæ”¯æ´å¤šå€‹ç­–ç•¥æª”æ¡ˆ
2. **ç¨‹å¼ç¢¼å°èˆª**ï¼šå‡½æ•¸å’Œé¡åˆ¥å°èˆª
3. **ç¨‹å¼ç¢¼æ‘ºç–Š**ï¼šæ›´æ™ºèƒ½çš„æ‘ºç–Šé‚è¼¯
4. **ä¸»é¡Œè‡ªå®šç¾©**ï¼šè‡ªå®šç¾©ç·¨è¼¯å™¨ä¸»é¡Œ
5. **å¤–æ›ç³»çµ±**ï¼šå¯æ“´å±•çš„å¤–æ›æ¶æ§‹

### æ¸¬è©¦

#### åŸ·è¡Œæ¸¬è©¦
```bash
python test_code_editor_features.py
```

#### æ¸¬è©¦é …ç›®
1. ç¨‹å¼ç¢¼ç·¨è¼¯å™¨é é¢è¼‰å…¥
2. ç¨‹å¼ç¢¼ç·¨è¼¯å™¨ API åŠŸèƒ½
3. ç¨‹å¼ç¢¼é©—è­‰åŠŸèƒ½
4. ç­–ç•¥å»ºç«‹å’Œç·¨è¼¯
5. ç¨‹å¼ç¢¼ç·¨è¼¯å™¨ç‰¹è‰²åŠŸèƒ½
6. ç·¨è¼¯å™¨æ•´åˆåŠŸèƒ½

#### æ¸¬è©¦çµæœ
- æ‰€æœ‰æ¸¬è©¦é€šéè¡¨ç¤ºåŠŸèƒ½æ­£å¸¸
- å¤±æ•—çš„æ¸¬è©¦æœƒé¡¯ç¤ºè©³ç´°éŒ¯èª¤è¨Šæ¯
- æ¸¬è©¦å ±å‘ŠåŒ…å«é€šéç‡å’Œè©³ç´°çµæœ

### æŠ€è¡“æ”¯æ´

#### é–‹ç™¼æ–‡ä»¶
- [CodeMirror å®˜æ–¹æ–‡ä»¶](https://codemirror.net/doc/manual.html)
- [Python Mode æ–‡ä»¶](https://codemirror.net/mode/python/)
- [ç·¨è¼¯å™¨ API åƒè€ƒ](https://codemirror.net/doc/manual.html#api)

#### å•é¡Œå›å ±
å¦‚æœ‰å•é¡Œæˆ–å»ºè­°ï¼Œè«‹ï¼š
1. æª¢æŸ¥ç€è¦½å™¨æ§åˆ¶å°éŒ¯èª¤
2. æŸ¥çœ‹ç³»çµ±æ—¥èªŒæª”æ¡ˆ
3. åŸ·è¡Œæ¸¬è©¦è…³æœ¬é©—è­‰åŠŸèƒ½
4. æä¾›è©³ç´°çš„éŒ¯èª¤è¨Šæ¯å’Œé‡ç¾æ­¥é©Ÿ

## è³‡æ–™é è¦½ç³»çµ±

### æ¦‚è¿°

æœ¬ç³»çµ±æ–°å¢äº†é¡ä¼¼ Jupyter çš„è³‡æ–™é è¦½åŠŸèƒ½ï¼Œè®“ç”¨æˆ¶åœ¨ç­–ç•¥ç·¨è¼¯å™¨ä¸­å¯ä»¥ï¼š
1. è¼‰å…¥å„ç¨®é è¨­çš„ç¯„ä¾‹è³‡æ–™
2. ä»¥è¡¨æ ¼å½¢å¼é è¦½è³‡æ–™å…§å®¹
3. ç®¡ç†è‡ªå®šç¾©è³‡æ–™é¡å‹
4. å¿«é€Ÿæ¸¬è©¦ç­–ç•¥é‚è¼¯

### ä¸»è¦åŠŸèƒ½

#### 1. è³‡æ–™é è¦½åŠŸèƒ½

##### 1.1 è³‡æ–™é è¦½å€åŸŸ
- åœ¨ç­–ç•¥ç·¨è¼¯å™¨ä¸­æ–°å¢äº†è³‡æ–™é è¦½å€åŸŸ
- æ”¯æ´é¡¯ç¤ºæœ€å¤š 100 ç­†è³‡æ–™ï¼ˆé¿å…é é¢éè¼‰ï¼‰
- è‡ªå‹•æ ¼å¼åŒ–æ•¸å€¼å’Œæ—¥æœŸé¡¯ç¤º
- æä¾›è³‡æ–™çµ±è¨ˆè³‡è¨Šï¼ˆç­†æ•¸ã€æ¬„ä½æ•¸ï¼‰

##### 1.2 è³‡æ–™è¼‰å…¥æ§åˆ¶
- **è¼‰å…¥ç¯„ä¾‹è³‡æ–™**ï¼šé–‹å•Ÿè³‡æ–™é¸æ“‡å°è©±æ¡†
- **æ¸…é™¤**ï¼šæ¸…é™¤ç•¶å‰é è¦½çš„è³‡æ–™
- **è³‡æ–™è³‡è¨Š**ï¼šé¡¯ç¤ºè³‡æ–™ç­†æ•¸å’Œæ¬„ä½æ•¸

#### 2. é è¨­è³‡æ–™é¡å‹

ç³»çµ±æä¾›ä»¥ä¸‹é è¨­è³‡æ–™é¡å‹ï¼š

##### 2.1 æ¯æ—¥è‚¡åƒ¹ (daily_price)
- **æè¿°**ï¼šè‚¡ç¥¨æ¯æ—¥é–‹ç›¤ã€æ”¶ç›¤ã€æœ€é«˜ã€æœ€ä½åƒ¹ç­‰åŸºæœ¬è³‡è¨Š
- **åƒæ•¸**ï¼š
  - `symbol`ï¼šè‚¡ç¥¨ä»£ç¢¼ï¼ˆé è¨­ï¼š2330ï¼‰
  - `start_date`ï¼šé–‹å§‹æ—¥æœŸ
  - `end_date`ï¼šçµæŸæ—¥æœŸ
- **è³‡æ–™æ¬„ä½**ï¼šdate, symbol, open, high, low, close, volume, change, change_pct

##### 2.2 åˆ†Kè‚¡åƒ¹ (minute_price)
- **æè¿°**ï¼šè‚¡ç¥¨åˆ†Kç·šåœ–è³‡æ–™ï¼ŒåŒ…å«é–‹ç›¤ã€æ”¶ç›¤ã€æœ€é«˜ã€æœ€ä½åƒ¹
- **åƒæ•¸**ï¼š
  - `symbol`ï¼šè‚¡ç¥¨ä»£ç¢¼ï¼ˆé è¨­ï¼š2330ï¼‰
  - `interval`ï¼šæ™‚é–“é–“éš”ï¼ˆ1, 5, 15, 30, 60åˆ†é˜ï¼‰
  - `date`ï¼šæ—¥æœŸ
- **è³‡æ–™æ¬„ä½**ï¼šdatetime, symbol, open, high, low, close, volume, interval

##### 2.3 é™¤æ¬Šæ¯è³‡æ–™ (dividend)
- **æè¿°**ï¼šè‚¡ç¥¨é™¤æ¬Šæ¯ç›¸é—œè³‡è¨Šï¼ŒåŒ…å«é™¤æ¬Šæ¯æ—¥æœŸã€é‡‘é¡ç­‰
- **åƒæ•¸**ï¼š
  - `symbol`ï¼šè‚¡ç¥¨ä»£ç¢¼ï¼ˆé è¨­ï¼š2330ï¼‰
  - `start_date`ï¼šé–‹å§‹æ—¥æœŸ
  - `end_date`ï¼šçµæŸæ—¥æœŸ
- **è³‡æ–™æ¬„ä½**ï¼šdate, symbol, dividend_type, cash_dividend, stock_dividend, ex_dividend_date, payment_date, total_dividend

##### 2.4 æ¯æ—¥è‚¡åƒ¹åˆä½µé™¤æ¬Šæ¯ (daily_price_with_dividend)
- **æè¿°**ï¼šæ¯æ—¥è‚¡åƒ¹è³‡æ–™ä¸¦åŒ…å«é™¤æ¬Šæ¯èª¿æ•´è³‡è¨Š
- **åƒæ•¸**ï¼š
  - `symbol`ï¼šè‚¡ç¥¨ä»£ç¢¼ï¼ˆé è¨­ï¼š2330ï¼‰
  - `start_date`ï¼šé–‹å§‹æ—¥æœŸ
  - `end_date`ï¼šçµæŸæ—¥æœŸ
  - `adjust_type`ï¼šèª¿æ•´é¡å‹ï¼ˆall, dividend, noneï¼‰
- **è³‡æ–™æ¬„ä½**ï¼šåŒ…å«æ¯æ—¥è‚¡åƒ¹æ‰€æœ‰æ¬„ä½ + dividend_type, cash_dividend, stock_dividend, total_dividend, adjusted_close

##### 2.5 æŠ€è¡“æŒ‡æ¨™ (technical_indicators)
- **æè¿°**ï¼šåŒ…å«å„ç¨®æŠ€è¡“æŒ‡æ¨™çš„è‚¡åƒ¹è³‡æ–™
- **åƒæ•¸**ï¼š
  - `symbol`ï¼šè‚¡ç¥¨ä»£ç¢¼ï¼ˆé è¨­ï¼š2330ï¼‰
  - `start_date`ï¼šé–‹å§‹æ—¥æœŸ
  - `end_date`ï¼šçµæŸæ—¥æœŸ
  - `indicators`ï¼šæŠ€è¡“æŒ‡æ¨™ï¼ˆall, ma, rsi, macd, bollingerï¼‰
- **è³‡æ–™æ¬„ä½**ï¼šåŒ…å«æ¯æ—¥è‚¡åƒ¹æ¬„ä½ + ma5, ma10, ma20, rsi, macd, macd_signal, macd_histogram, bb_upper, bb_middle, bb_lower

#### 3. è³‡æ–™é¡å‹ç®¡ç†

##### 3.1 æ–°å¢è‡ªå®šç¾©è³‡æ–™é¡å‹
```json
{
    "id": "custom_data_type",
    "name": "è‡ªå®šç¾©è³‡æ–™é¡å‹",
    "description": "æè¿°",
    "category": "åˆ†é¡",
    "parameters": {
        "param_name": {
            "type": "text|number|select|date",
            "label": "åƒæ•¸æ¨™ç±¤",
            "default": "é è¨­å€¼",
            "placeholder": "æç¤ºæ–‡å­—",
            "options": [{"value": "v1", "label": "é¸é …1"}]
        }
    }
}
```

##### 3.2 åƒæ•¸é¡å‹æ”¯æ´
- **text**ï¼šæ–‡å­—è¼¸å…¥
- **number**ï¼šæ•¸å­—è¼¸å…¥ï¼ˆæ”¯æ´ min, max, stepï¼‰
- **select**ï¼šä¸‹æ‹‰é¸å–®ï¼ˆéœ€è¦æä¾› optionsï¼‰
- **date**ï¼šæ—¥æœŸé¸æ“‡å™¨

#### 4. API ç«¯é»

##### 4.1 å–å¾—è³‡æ–™é¡å‹åˆ—è¡¨
```
GET /api/sample-data/types
```

##### 4.2 è¼‰å…¥ç¯„ä¾‹è³‡æ–™
```
POST /api/sample-data/load
Content-Type: application/json

{
    "data_type": "daily_price",
    "parameters": {
        "symbol": "2330",
        "start_date": "2024-01-01",
        "end_date": "2024-01-31"
    }
}
```

##### 4.3 å–å¾—ç‰¹å®šè³‡æ–™é¡å‹
```
GET /api/sample-data/types/{data_type_id}
```

##### 4.4 æ–°å¢è³‡æ–™é¡å‹
```
POST /api/sample-data/types
Content-Type: application/json

{
    "id": "custom_type",
    "name": "è‡ªå®šç¾©é¡å‹",
    "description": "æè¿°",
    "category": "åˆ†é¡",
    "parameters": {}
}
```

##### 4.5 ç§»é™¤è³‡æ–™é¡å‹
```
DELETE /api/sample-data/types/{data_type_id}
```

### ä½¿ç”¨æ–¹å¼

#### 1. åœ¨ç­–ç•¥ç·¨è¼¯å™¨ä¸­ä½¿ç”¨

1. é–‹å•Ÿç­–ç•¥ç·¨è¼¯å™¨é é¢
2. é»æ“Šã€Œè¼‰å…¥ç¯„ä¾‹è³‡æ–™ã€æŒ‰éˆ•
3. åœ¨å°è©±æ¡†ä¸­é¸æ“‡è³‡æ–™é¡å‹
4. è¨­å®šç›¸é—œåƒæ•¸
5. é»æ“Šã€Œè¼‰å…¥è³‡æ–™ã€
6. è³‡æ–™å°‡ä»¥è¡¨æ ¼å½¢å¼é¡¯ç¤ºåœ¨é è¦½å€åŸŸ

#### 2. åœ¨ç­–ç•¥ç¨‹å¼ç¢¼ä¸­ä½¿ç”¨

è¼‰å…¥çš„è³‡æ–™å¯ä»¥é€é `currentPreviewData` è®Šæ•¸åœ¨ç­–ç•¥ç¨‹å¼ç¢¼ä¸­å­˜å–ï¼š

```python
def execute_strategy(data, parameters):
    # ä½¿ç”¨é è¦½è³‡æ–™é€²è¡Œç­–ç•¥æ¸¬è©¦
    if currentPreviewData:
        # è½‰æ›ç‚º Polars DataFrame
        df = pl.DataFrame(currentPreviewData)
        
        # é€²è¡Œç­–ç•¥åˆ†æ
        result = analyze_data(df)
        
        return result
    else:
        return "è«‹å…ˆè¼‰å…¥è³‡æ–™"
```

#### 3. æ–°å¢è‡ªå®šç¾©è³‡æ–™é¡å‹

1. æº–å‚™è³‡æ–™é¡å‹å®šç¾© JSON
2. ä½¿ç”¨ API æ–°å¢è³‡æ–™é¡å‹
3. é‡æ–°è¼‰å…¥ç­–ç•¥ç·¨è¼¯å™¨é é¢
4. æ–°çš„è³‡æ–™é¡å‹å°‡å‡ºç¾åœ¨é¸æ“‡åˆ—è¡¨ä¸­

### æŠ€è¡“å¯¦ä½œ

#### 1. è³‡æ–™æä¾›å™¨ (DataProvider)

- ä½ç½®ï¼š`core/data_provider.py`
- åŠŸèƒ½ï¼šç®¡ç†è³‡æ–™é¡å‹å®šç¾©å’Œè³‡æ–™ç”Ÿæˆ
- æ”¯æ´ï¼šæ¨¡æ“¬è³‡æ–™ç”Ÿæˆã€è³‡æ–™é¡å‹ç®¡ç†ã€æª”æ¡ˆå„²å­˜

#### 2. å‰ç«¯æ•´åˆ

- ç­–ç•¥ç·¨è¼¯å™¨é é¢ï¼š`web/templates/strategy_editor.html`
- JavaScript åŠŸèƒ½ï¼šè³‡æ–™è¼‰å…¥ã€é è¦½é¡¯ç¤ºã€åƒæ•¸è™•ç†
- éŸ¿æ‡‰å¼è¨­è¨ˆï¼šæ”¯æ´ä¸åŒè¢å¹•å°ºå¯¸

#### 3. å¾Œç«¯ API

- è·¯ç”±å®šç¾©ï¼š`main.py`
- è³‡æ–™è™•ç†ï¼šéåŒæ­¥è™•ç†ã€éŒ¯èª¤è™•ç†
- å¿«å–æ•´åˆï¼šå¯èˆ‡ç¾æœ‰å¿«å–ç³»çµ±æ•´åˆ

### æ³¨æ„äº‹é …

#### 1. è³‡æ–™é™åˆ¶
- é è¦½æœ€å¤šé¡¯ç¤º 100 ç­†è³‡æ–™
- å¤§é‡è³‡æ–™å»ºè­°åˆ†æ‰¹è™•ç†
- è³‡æ–™ç‚ºæ¨¡æ“¬è³‡æ–™ï¼Œåƒ…ä¾›æ¸¬è©¦ä½¿ç”¨

#### 2. æ•ˆèƒ½è€ƒé‡
- è³‡æ–™è¼‰å…¥ç‚ºéåŒæ­¥è™•ç†
- å¤§é‡è³‡æ–™å¯èƒ½å½±éŸ¿é é¢éŸ¿æ‡‰é€Ÿåº¦
- å»ºè­°å®šæœŸæ¸…ç†ä¸éœ€è¦çš„è³‡æ–™

#### 3. å®‰å…¨æ€§
- è³‡æ–™é¡å‹å®šç¾©éœ€è¦é©—è­‰
- é˜²æ­¢æƒ¡æ„ç¨‹å¼ç¢¼æ³¨å…¥
- åƒæ•¸å€¼éœ€è¦é€²è¡Œé¡å‹æª¢æŸ¥

### æœªä¾†æ“´å±•

#### 1. è³‡æ–™ä¾†æºæ“´å±•
- æ•´åˆçœŸå¯¦è‚¡ç¥¨ API
- æ”¯æ´æ›´å¤šè³‡æ–™æ ¼å¼
- æ–°å¢æ­·å²è³‡æ–™æŸ¥è©¢

#### 2. åŠŸèƒ½å¢å¼·
- è³‡æ–™åŒ¯å‡ºåŠŸèƒ½
- åœ–è¡¨è¦–è¦ºåŒ–
- è³‡æ–™ç¯©é¸å’Œæ’åº

#### 3. ä½¿ç”¨è€…é«”é©—
- æ‹–æ‹½å¼è³‡æ–™è¼‰å…¥
- è³‡æ–™é è¦½å¿«ç…§
- æ‰¹æ¬¡è³‡æ–™è™•ç†

### æ¸¬è©¦

ä½¿ç”¨æä¾›çš„æ¸¬è©¦è…³æœ¬é©—è­‰åŠŸèƒ½ï¼š

```bash
python test_data_preview_system.py
```

æ¸¬è©¦åŒ…å«ï¼š
- è³‡æ–™é¡å‹è¼‰å…¥
- å„ç¨®è³‡æ–™é¡å‹æ¸¬è©¦
- è³‡æ–™é¡å‹ç®¡ç†
- ç­–ç•¥ç·¨è¼¯å™¨æ•´åˆ

### ç¸½çµ

è³‡æ–™é è¦½ç³»çµ±ç‚ºç­–ç•¥ç·¨è¼¯å™¨æä¾›äº†å¼·å¤§çš„è³‡æ–™è™•ç†èƒ½åŠ›ï¼Œè®“ç”¨æˆ¶å¯ä»¥ï¼š
- å¿«é€Ÿè¼‰å…¥å’Œé è¦½å„ç¨®è³‡æ–™
- æ¸¬è©¦ç­–ç•¥é‚è¼¯
- ç®¡ç†è‡ªå®šç¾©è³‡æ–™é¡å‹
- æå‡é–‹ç™¼æ•ˆç‡

é€™å€‹åŠŸèƒ½è®“ç³»çµ±æ›´æ¥è¿‘å°ˆæ¥­çš„é‡åŒ–äº¤æ˜“å¹³å°ï¼Œæä¾›é¡ä¼¼ Jupyter çš„äº’å‹•å¼è³‡æ–™åˆ†æé«”é©—ã€‚

## å¿«å–ç³»çµ±èˆ‡è‡ªå®šç¾©ç­–ç•¥åŠŸèƒ½

### æ¦‚è¿°

æœ¬æ¬¡æ›´æ–°æ–°å¢äº†å…©å€‹é‡è¦åŠŸèƒ½ï¼š

1. **å¿«å–ç³»çµ±**ï¼šé¡ä¼¼ Jupyter çš„è¨˜æ†¶é«”å¿«å–æ©Ÿåˆ¶ï¼Œé¿å…é‡è¤‡è«‹æ±‚ API
2. **è‡ªå®šç¾©ç­–ç•¥ç³»çµ±**ï¼šé¡ä¼¼ XQ çš„åŠŸèƒ½ï¼Œè®“ç”¨æˆ¶å¯ä»¥è‡ªè¡Œæ–°å¢å’Œç·¨è¼¯ç­–ç•¥

### å¿«å–ç³»çµ± (Cache System)

#### åŠŸèƒ½ç‰¹é»

- **é›™å±¤å¿«å–**ï¼šè¨˜æ†¶é«”å¿«å– + æª”æ¡ˆå¿«å–
- **è‡ªå‹•ç®¡ç†**ï¼šè¨˜æ†¶é«”ä¸è¶³æ™‚è‡ªå‹•æ¸…ç†æœ€èˆŠçš„è³‡æ–™
- **TTL æ©Ÿåˆ¶**ï¼šå¯è¨­å®šå¿«å–å­˜æ´»æ™‚é–“
- **çµ±è¨ˆè³‡è¨Š**ï¼šæä¾›è©³ç´°çš„å¿«å–ä½¿ç”¨çµ±è¨ˆ
- **API æ•´åˆ**ï¼šèˆ‡ StockAPI ç„¡ç¸«æ•´åˆ

#### ä½¿ç”¨æ–¹å¼

##### 1. åŸºæœ¬å¿«å–æ“ä½œ

```python
from core.cache_manager import cache_manager

# å„²å­˜è³‡æ–™åˆ°å¿«å–
success = cache_manager.set_cached_data(
    stock_id="2330",
    start_date="2024-01-01",
    end_date="2024-01-03",
    data=stock_data,
    data_type="price",
    ttl_hours=24
)

# å¾å¿«å–è®€å–è³‡æ–™
cached_data = cache_manager.get_cached_data(
    stock_id="2330",
    start_date="2024-01-01",
    end_date="2024-01-03",
    data_type="price"
)
```

##### 2. èˆ‡ StockAPI æ•´åˆ

```python
from api.stock_api import StockAPI

async with StockAPI() as stock_api:
    # ç¬¬ä¸€æ¬¡è«‹æ±‚æœƒå¾ API å–å¾—ä¸¦å¿«å–
    data1 = await stock_api.get_stock_price(
        stock_ids=["2330"],
        start_date="2024-01-01",
        end_date="2024-01-03",
        use_cache=True  # å•Ÿç”¨å¿«å–
    )
    
    # ç¬¬äºŒæ¬¡è«‹æ±‚æœƒå¾å¿«å–å–å¾—ï¼ˆæ›´å¿«ï¼‰
    data2 = await stock_api.get_stock_price(
        stock_ids=["2330"],
        start_date="2024-01-01",
        end_date="2024-01-03",
        use_cache=True
    )
```

##### 3. å¿«å–ç®¡ç†

```python
# å–å¾—å¿«å–è³‡è¨Š
info = cache_manager.get_cache_info()
print(f"è¨˜æ†¶é«”ä½¿ç”¨é‡: {info['memory_usage_mb']} MB")
print(f"æª”æ¡ˆå¿«å–å¤§å°: {info['file_cache_size_mb']} MB")

# æ¸…ç†å¿«å–
cache_manager.clear_cache("expired")  # æ¸…ç†éæœŸå¿«å–
cache_manager.clear_cache("memory")   # æ¸…ç†è¨˜æ†¶é«”å¿«å–
cache_manager.clear_cache("all")      # æ¸…ç†æ‰€æœ‰å¿«å–
```

#### å¿«å–ç®¡ç†é é¢

è¨ªå• `/cache-manager` å¯ä»¥æŸ¥çœ‹ï¼š
- è¨˜æ†¶é«”ä½¿ç”¨é‡çµ±è¨ˆ
- å¿«å–é …ç›®è©³æƒ…
- è‚¡ç¥¨ä»£ç¢¼åˆ—è¡¨
- å¿«å–æ¸…ç†åŠŸèƒ½

### è‡ªå®šç¾©ç­–ç•¥ç³»çµ± (Custom Strategy System)

#### åŠŸèƒ½ç‰¹é»

- **è¦–è¦ºåŒ–ç·¨è¼¯å™¨**ï¼šç¶²é ç‰ˆç­–ç•¥ç·¨è¼¯å™¨
- **å³æ™‚é©—è­‰**ï¼šèªæ³•æª¢æŸ¥å’Œå‡½æ•¸æª¢æ¸¬
- **æ¨¡æ¿ç³»çµ±**ï¼šæä¾›ç­–ç•¥æ¨¡æ¿
- **ç‰ˆæœ¬ç®¡ç†**ï¼šç­–ç•¥çš„å»ºç«‹ã€æ›´æ–°ã€åˆªé™¤
- **å‹•æ…‹è¼‰å…¥**ï¼šç¨‹å¼ç¢¼å­—ä¸²å‹•æ…‹ç·¨è­¯åŸ·è¡Œ

#### ä½¿ç”¨æ–¹å¼

##### 1. ç­–ç•¥ç·¨è¼¯å™¨

è¨ªå• `/strategy-editor` é€²å…¥ç­–ç•¥ç·¨è¼¯å™¨ï¼Œå¯ä»¥ï¼š
- å»ºç«‹æ–°ç­–ç•¥
- ç·¨è¼¯ç¾æœ‰ç­–ç•¥
- è¼‰å…¥ç­–ç•¥æ¨¡æ¿
- é©—è­‰ç­–ç•¥ç¨‹å¼ç¢¼
- æ¸¬è©¦ç­–ç•¥åŠŸèƒ½

##### 2. ç­–ç•¥ç¨‹å¼ç¢¼æ ¼å¼

```python
# è‡ªå®šç¾©ç­–ç•¥æ¨¡æ¿
def should_entry(stock_data, current_index):
    """
    åˆ¤æ–·æ˜¯å¦æ‡‰è©²é€²å ´
    
    Args:
        stock_data: è‚¡åƒ¹è³‡æ–™ (polars DataFrame)
        current_index: ç•¶å‰è³‡æ–™ç´¢å¼•
        
    Returns:
        tuple: (æ˜¯å¦é€²å ´, é€²å ´è³‡è¨Š)
    """
    current_row = stock_data[current_index]
    
    # ç¯„ä¾‹ï¼šç•¶æ”¶ç›¤åƒ¹å¤§æ–¼é–‹ç›¤åƒ¹æ™‚é€²å ´
    if current_row["close"] > current_row["open"]:
        return True, {"reason": "æ”¶ç›¤åƒ¹å¤§æ–¼é–‹ç›¤åƒ¹"}
    
    return False, {}

def should_exit(stock_data, current_index, position):
    """
    åˆ¤æ–·æ˜¯å¦æ‡‰è©²å‡ºå ´
    
    Args:
        stock_data: è‚¡åƒ¹è³‡æ–™ (polars DataFrame)
        current_index: ç•¶å‰è³‡æ–™ç´¢å¼•
        position: ç•¶å‰æŒå€‰è³‡è¨Š
        
    Returns:
        tuple: (æ˜¯å¦å‡ºå ´, å‡ºå ´è³‡è¨Š)
    """
    current_row = stock_data[current_index]
    entry_index = position["entry_index"]
    entry_price = position["entry_price"]
    
    # è¨ˆç®—æŒæœ‰å¤©æ•¸
    holding_days = (current_row["date"] - stock_data[entry_index]["date"]).days
    
    # è¨ˆç®—è™§æç‡
    loss_rate = ((current_row["close"] - entry_price) / entry_price) * 100
    
    # ç¯„ä¾‹ï¼šæŒæœ‰è¶…é5å¤©æˆ–è™§æè¶…é5%æ™‚å‡ºå ´
    if holding_days >= 5 or loss_rate <= -5:
        return True, {"reason": f"æŒæœ‰{holding_days}å¤©æˆ–è™§æ{loss_rate:.2f}%"}
    
    return False, {}

# å¯é¸ï¼šè‡ªå®šç¾©åƒæ•¸é…ç½®
custom_parameters = {
    "max_holding_days": {
        "type": "number",
        "label": "æœ€å¤§æŒæœ‰å¤©æ•¸",
        "default": 5,
        "min": 1,
        "max": 30,
        "step": 1,
        "description": "æœ€å¤§æŒæœ‰å¤©æ•¸"
    },
    "max_loss_rate": {
        "type": "number",
        "label": "æœ€å¤§è™§æç‡",
        "default": 5.0,
        "min": 1.0,
        "max": 20.0,
        "step": 0.5,
        "description": "æœ€å¤§è™§æç‡ç™¾åˆ†æ¯”"
    }
}
```

##### 3. API æ“ä½œ

```python
from strategies.strategy_manager import StrategyManager

manager = StrategyManager()

# å»ºç«‹ç­–ç•¥
strategy_id = manager.create_strategy(
    name="æˆ‘çš„ç­–ç•¥",
    description="é€™æ˜¯ä¸€å€‹è‡ªå®šç¾©ç­–ç•¥",
    code=python_code
)

# å–å¾—ç­–ç•¥
strategy = manager.get_strategy(strategy_id)

# æ›´æ–°ç­–ç•¥
manager.update_strategy(
    strategy_id,
    name="æ›´æ–°å¾Œçš„ç­–ç•¥åç¨±",
    code=new_code
)

# å»ºç«‹ç­–ç•¥å¯¦ä¾‹
strategy_instance = manager.create_strategy_instance(strategy_id)

# åˆªé™¤ç­–ç•¥
manager.delete_strategy(strategy_id)
```

#### ç­–ç•¥ç®¡ç†å™¨é é¢

è¨ªå• `/strategy-editor` å¯ä»¥ï¼š
- æŸ¥çœ‹æ‰€æœ‰è‡ªå®šç¾©ç­–ç•¥
- å»ºç«‹æ–°ç­–ç•¥
- ç·¨è¼¯ç¾æœ‰ç­–ç•¥
- è¼‰å…¥ç­–ç•¥æ¨¡æ¿
- é©—è­‰å’Œæ¸¬è©¦ç­–ç•¥
- åŒ¯å‡º/åŒ¯å…¥ç­–ç•¥

### æª”æ¡ˆçµæ§‹

```
trading_web_system/
â”œâ”€â”€ core/
â”‚   â””â”€â”€ cache_manager.py          # å¿«å–ç®¡ç†å™¨
â”œâ”€â”€ strategies/
â”‚   â”œâ”€â”€ dynamic_strategy.py       # å‹•æ…‹ç­–ç•¥é¡åˆ¥
â”‚   â””â”€â”€ strategy_manager.py       # ç­–ç•¥ç®¡ç†å™¨
â”œâ”€â”€ web/templates/
â”‚   â”œâ”€â”€ cache_manager.html        # å¿«å–ç®¡ç†é é¢
â”‚   â””â”€â”€ strategy_editor.html      # ç­–ç•¥ç·¨è¼¯å™¨é é¢
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ cache/                    # å¿«å–æª”æ¡ˆç›®éŒ„
â”‚   â””â”€â”€ strategies/               # ç­–ç•¥æª”æ¡ˆç›®éŒ„
â”œâ”€â”€ main.py                       # ä¸»ç¨‹å¼ï¼ˆå·²æ›´æ–°ï¼‰
â””â”€â”€ test_cache_system.py          # æ¸¬è©¦è…³æœ¬
```

### æ¸¬è©¦

åŸ·è¡Œæ¸¬è©¦è…³æœ¬ä¾†é©—è­‰åŠŸèƒ½ï¼š

```bash
python test_cache_system.py
```

### é…ç½®é¸é …

#### å¿«å–é…ç½®

åœ¨ `core/cache_manager.py` ä¸­å¯ä»¥èª¿æ•´ï¼š

```python
# å¿«å–ç›®éŒ„
cache_dir = "data/cache"

# æœ€å¤§è¨˜æ†¶é«”ä½¿ç”¨é‡ (MB)
max_memory_mb = 1024

# é è¨­å¿«å–å­˜æ´»æ™‚é–“ (å°æ™‚)
ttl_hours = 24
```

#### ç­–ç•¥é…ç½®

åœ¨ `strategies/strategy_manager.py` ä¸­å¯ä»¥èª¿æ•´ï¼š

```python
# ç­–ç•¥å„²å­˜ç›®éŒ„
storage_dir = "data/strategies"
```

### æ³¨æ„äº‹é …

1. **å®‰å…¨æ€§**ï¼šè‡ªå®šç¾©ç­–ç•¥ä½¿ç”¨ `exec()` åŸ·è¡Œï¼Œè«‹ç¢ºä¿ç¨‹å¼ç¢¼ä¾†æºå¯ä¿¡
2. **è¨˜æ†¶é«”ç®¡ç†**ï¼šå¿«å–ç³»çµ±æœƒè‡ªå‹•ç®¡ç†è¨˜æ†¶é«”ï¼Œä½†å»ºè­°å®šæœŸæ¸…ç†éæœŸå¿«å–
3. **æ•ˆèƒ½**ï¼šç¬¬ä¸€æ¬¡è«‹æ±‚æœƒè¼ƒæ…¢ï¼ˆéœ€è¦å¾ API å–å¾—ï¼‰ï¼Œå¾ŒçºŒè«‹æ±‚æœƒå¾ˆå¿«ï¼ˆå¾å¿«å–å–å¾—ï¼‰
4. **ç›¸å®¹æ€§**ï¼šç­–ç•¥ç¨‹å¼ç¢¼éœ€è¦ç¬¦åˆæŒ‡å®šçš„å‡½æ•¸ç°½åå’Œè¿”å›æ ¼å¼

### æœªä¾†æ”¹é€²

1. **ç­–ç•¥å¸‚å ´**ï¼šå…è¨±ç”¨æˆ¶åˆ†äº«å’Œä¸‹è¼‰ç­–ç•¥
2. **ç­–ç•¥ç‰ˆæœ¬æ§åˆ¶**ï¼šæ”¯æ´ç­–ç•¥çš„ç‰ˆæœ¬ç®¡ç†
3. **é€²éšå¿«å–**ï¼šæ”¯æ´æ›´å¤šè³‡æ–™é¡å‹çš„å¿«å–
4. **æ•ˆèƒ½å„ªåŒ–**ï¼šé€²ä¸€æ­¥å„ªåŒ–å¿«å–å’Œç­–ç•¥åŸ·è¡Œæ•ˆèƒ½

## Jupyter ç­–ç•¥åˆ†æåŠŸèƒ½

### åŠŸèƒ½æ¦‚è¿°

Jupyter ç­–ç•¥åˆ†æåŠŸèƒ½å…è¨±åœ¨ Jupyter æ¨¡å¼ä¸‹è‡ªå‹•åˆ†æç­–ç•¥ç¨‹å¼ç¢¼ï¼Œåˆ¤æ–·ç­–ç•¥é¡å‹ï¼ˆç‹€æ…‹æ©Ÿ/å‘é‡åŒ–/æ··åˆå¼ï¼‰ï¼Œä¸¦æä¾›è©³ç´°çš„åˆ†æå ±å‘Šã€‚

### å•é¡Œè§£æ±º

#### 1. æ–°å¢ Jupyter ç­–ç•¥å¾Œä»é¡¯ç¤ºèˆŠç·¨è¼¯æ¨¡å¼

**å•é¡Œæè¿°ï¼š** æ–°å»º Jupyter ç­–ç•¥å¾Œï¼Œç·¨è¼¯å™¨ä»é¡¯ç¤ºå‚³çµ±æ¨¡å¼è€Œé Jupyter æ¨¡å¼ã€‚

**è§£æ±ºæ–¹æ¡ˆï¼š**
- ä¿®æ”¹ `confirmCreateStrategy` å‡½æ•¸ï¼Œé¿å…å‘¼å« `loadStrategy` è¦†è“‹ç·¨è¼¯å™¨è¨­å®š
- ç›´æ¥è¨­å®šç­–ç•¥è³‡è¨Šä¸¦æ ¹æ“šç·¨è¼¯æ¨¡å¼åˆå§‹åŒ–å°æ‡‰çš„ç·¨è¼¯å™¨
- ç¢ºä¿ Jupyter æ¨¡å¼æ­£ç¢ºé¡¯ç¤ºå’Œåˆå§‹åŒ–

**ä¿®æ”¹æª”æ¡ˆï¼š**
- `web/templates/strategy_editor.html` - ä¿®æ”¹æ–°å»ºç­–ç•¥é‚è¼¯

#### 2. Jupyter æ¨¡å¼ä¸‹ç­–ç•¥é¡å‹åˆ†è¾¨

**å•é¡Œæè¿°ï¼š** åœ¨ Jupyter æ¨¡å¼ä¸‹ç„¡æ³•åƒå‚³çµ±æ¨¡å¼é‚£æ¨£åˆ†è¾¨ç­–ç•¥é¡å‹ï¼ˆç‹€æ…‹æ©Ÿ/å‘é‡åŒ–/æ··åˆå¼ï¼‰ã€‚

**è§£æ±ºæ–¹æ¡ˆï¼š**
- æ–°å¢ç­–ç•¥ç¨‹å¼ç¢¼åˆ†æ API
- é€é AST è§£æåˆ†æç¨‹å¼ç¢¼ä¸­çš„é—œéµå‡½æ•¸
- æ ¹æ“šå‡½æ•¸å­˜åœ¨èˆ‡å¦åˆ¤æ–·ç­–ç•¥é¡å‹

### æŠ€è¡“å¯¦ç¾

#### å¾Œç«¯å¯¦ç¾

##### 1. Jupyter API æ“´å±• (`api/jupyter_api.py`)

```python
@staticmethod
async def analyze_strategy_type(request: Request):
    """åˆ†æç­–ç•¥é¡å‹ï¼ˆç‹€æ…‹æ©Ÿ/å‘é‡åŒ–/æ··åˆå¼ï¼‰"""
    # åˆ†æç¨‹å¼ç¢¼ä¸­çš„å‡½æ•¸
    analysis = JupyterAPI._analyze_strategy_functions(code)
    # æ ¹æ“šåˆ†æçµæœåˆ¤æ–·ç­–ç•¥é¡å‹
    strategy_type = JupyterAPI._determine_strategy_type(analysis)
```

##### 2. ç­–ç•¥å‡½æ•¸åˆ†æ

```python
def _analyze_strategy_functions(code: str) -> Dict[str, Any]:
    """åˆ†æç­–ç•¥ç¨‹å¼ç¢¼ä¸­çš„å‡½æ•¸"""
    # ä½¿ç”¨ AST è§£æç¨‹å¼ç¢¼
    tree = ast.parse(code)
    
    # æª¢æŸ¥é—œéµå‡½æ•¸
    has_should_entry = False  # ç‹€æ…‹æ©Ÿå‡½æ•¸
    has_calculate_entry_signals = False  # å‘é‡åŒ–å‡½æ•¸
    
    # éæ­· AST å°‹æ‰¾å‡½æ•¸å®šç¾©
    for node in ast.walk(tree):
        if isinstance(node, ast.FunctionDef):
            func_name = node.name
            if func_name == 'should_entry':
                has_should_entry = True
            elif func_name == 'calculate_entry_signals':
                has_calculate_entry_signals = True
```

##### 3. ç­–ç•¥é¡å‹åˆ¤æ–·

```python
def _determine_strategy_type(analysis: Dict[str, Any]) -> str:
    """æ ¹æ“šåˆ†æçµæœåˆ¤æ–·ç­–ç•¥é¡å‹"""
    has_should_entry = analysis.get("has_should_entry", False)
    has_calculate_entry_signals = analysis.get("has_calculate_entry_signals", False)
    
    if has_should_entry and has_calculate_entry_signals:
        return "mixed"  # æ··åˆå¼
    elif has_should_entry:
        return "state_machine"  # ç‹€æ…‹æ©Ÿ
    elif has_calculate_entry_signals:
        return "vectorized"  # å‘é‡åŒ–
    else:
        return "unknown"  # æœªçŸ¥é¡å‹
```

#### å‰ç«¯å¯¦ç¾

##### 1. åˆ†ææŒ‰éˆ•

åœ¨ Jupyter å·¥å…·åˆ—ä¸­æ–°å¢ã€Œåˆ†æç­–ç•¥é¡å‹ã€æŒ‰éˆ•ï¼š

```html
<button class="btn btn-sm btn-outline-warning" onclick="analyzeStrategyType()">
    <i class="fas fa-search"></i> åˆ†æç­–ç•¥é¡å‹
</button>
```

##### 2. åˆ†æå‡½æ•¸

```javascript
async function analyzeStrategyType() {
    // æ”¶é›†æ‰€æœ‰å–®å…ƒæ ¼çš„ç¨‹å¼ç¢¼
    let allCode = '';
    jupyterCells.forEach(cellId => {
        const editor = jupyterCellEditors[cellId];
        if (editor) {
            allCode += editor.getValue() + '\n\n';
        }
    });
    
    // å‘¼å«å¾Œç«¯ API åˆ†æ
    const response = await fetch('/api/jupyter/analyze-strategy', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ code: allCode })
    });
    
    // é¡¯ç¤ºåˆ†æçµæœ
    const data = await response.json();
    if (data.status === 'success') {
        displayAnalysisResult(data.strategy_type, data.analysis);
    }
}
```

##### 3. çµæœé¡¯ç¤º

åˆ†æçµæœä»¥æ–°çš„å–®å…ƒæ ¼å½¢å¼é¡¯ç¤ºï¼ŒåŒ…å«ï¼š
- ç­–ç•¥é¡å‹æ¨™ç±¤
- å‡½æ•¸æª¢æ¸¬ç‹€æ…‹
- ç™¼ç¾çš„å‡½æ•¸åˆ—è¡¨
- è©³ç´°åˆ†æèªªæ˜

### API ç«¯é»

#### ç­–ç•¥åˆ†æ API

**ç«¯é»ï¼š** `POST /api/jupyter/analyze-strategy`

**è«‹æ±‚æ ¼å¼ï¼š**
```json
{
    "code": "ç­–ç•¥ç¨‹å¼ç¢¼å…§å®¹"
}
```

**å›æ‡‰æ ¼å¼ï¼š**
```json
{
    "status": "success",
    "strategy_type": "state_machine|vectorized|mixed|unknown",
    "analysis": {
        "has_should_entry": true/false,
        "has_calculate_entry_signals": true/false,
        "functions_found": ["å‡½æ•¸åç¨±åˆ—è¡¨"],
        "description": "åˆ†ææè¿°"
    }
}
```

### ç­–ç•¥é¡å‹åˆ¤æ–·è¦å‰‡

#### 1. ç‹€æ…‹æ©Ÿç­–ç•¥ (state_machine)
- **æ¢ä»¶ï¼š** åŒ…å« `should_entry` å‡½æ•¸
- **ç‰¹é»ï¼š** é€ç­†è™•ç†è³‡æ–™ï¼Œç¶­è­·ç‹€æ…‹
- **é©ç”¨ï¼š** è¤‡é›œé‚è¼¯ã€ç‹€æ…‹è¿½è¹¤

#### 2. å‘é‡åŒ–ç­–ç•¥ (vectorized)
- **æ¢ä»¶ï¼š** åŒ…å« `calculate_entry_signals` å‡½æ•¸
- **ç‰¹é»ï¼š** ä¸€æ¬¡æ€§è™•ç†æ‰€æœ‰è³‡æ–™
- **é©ç”¨ï¼š** ç°¡å–®é‚è¼¯ã€é«˜æ•ˆèƒ½

#### 3. æ··åˆå¼ç­–ç•¥ (mixed)
- **æ¢ä»¶ï¼š** åŒæ™‚åŒ…å« `should_entry` å’Œ `calculate_entry_signals` å‡½æ•¸
- **ç‰¹é»ï¼š** çµåˆå…©ç¨®æ¨¡å¼çš„å„ªé»
- **é©ç”¨ï¼š** è¤‡é›œç­–ç•¥éœ€æ±‚

#### 4. æœªçŸ¥é¡å‹ (unknown)
- **æ¢ä»¶ï¼š** ä¸åŒ…å«é—œéµå‡½æ•¸
- **ç‰¹é»ï¼š** ä¸€èˆ¬åˆ†ææˆ–ç¹ªåœ–ç¨‹å¼ç¢¼
- **é©ç”¨ï¼š** è³‡æ–™åˆ†æã€è¦–è¦ºåŒ–

### ä½¿ç”¨æµç¨‹

1. **é€²å…¥ Jupyter æ¨¡å¼**
   - æ–°å»ºç­–ç•¥æ™‚é¸æ“‡ Jupyter æ¨¡å¼
   - æˆ–åˆ‡æ›ç¾æœ‰ç­–ç•¥åˆ° Jupyter æ¨¡å¼

2. **ç·¨å¯«ç­–ç•¥ç¨‹å¼ç¢¼**
   - åœ¨å–®å…ƒæ ¼ä¸­è¼¸å…¥ç­–ç•¥ç¨‹å¼ç¢¼
   - å¯ä»¥åŒ…å«å¤šå€‹å–®å…ƒæ ¼çš„ç¨‹å¼ç¢¼

3. **åŸ·è¡Œåˆ†æ**
   - é»æ“Šã€Œåˆ†æç­–ç•¥é¡å‹ã€æŒ‰éˆ•
   - ç³»çµ±è‡ªå‹•åˆ†ææ‰€æœ‰å–®å…ƒæ ¼çš„ç¨‹å¼ç¢¼

4. **æŸ¥çœ‹çµæœ**
   - åˆ†æçµæœä»¥æ–°å–®å…ƒæ ¼å½¢å¼é¡¯ç¤º
   - åŒ…å«è©³ç´°çš„ç­–ç•¥é¡å‹è³‡è¨Š

### æ¸¬è©¦é©—è­‰

ä½¿ç”¨ `test_jupyter_strategy_analysis.py` æ¸¬è©¦è…³æœ¬é©—è­‰åŠŸèƒ½ï¼š

```bash
python test_jupyter_strategy_analysis.py
```

æ¸¬è©¦æ¡ˆä¾‹åŒ…æ‹¬ï¼š
- ç‹€æ…‹æ©Ÿç­–ç•¥æ¸¬è©¦
- å‘é‡åŒ–ç­–ç•¥æ¸¬è©¦
- æ··åˆå¼ç­–ç•¥æ¸¬è©¦
- æœªçŸ¥é¡å‹ç­–ç•¥æ¸¬è©¦

### æ³¨æ„äº‹é …

1. **ç¨‹å¼ç¢¼æ ¼å¼ï¼š** åˆ†æåŠŸèƒ½ä¾è³´æ­£ç¢ºçš„ Python èªæ³•
2. **å‡½æ•¸å‘½åï¼š** é—œéµå‡½æ•¸å¿…é ˆä½¿ç”¨æ¨™æº–å‘½åï¼ˆ`should_entry`, `calculate_entry_signals`ï¼‰
3. **å–®å…ƒæ ¼æ•´åˆï¼š** åˆ†ææœƒæ•´åˆæ‰€æœ‰ Jupyter å–®å…ƒæ ¼çš„ç¨‹å¼ç¢¼
4. **å³æ™‚åˆ†æï¼š** æ¯æ¬¡é»æ“Šåˆ†ææŒ‰éˆ•éƒ½æœƒé‡æ–°åˆ†æç•¶å‰ç¨‹å¼ç¢¼

### æœªä¾†æ“´å±•

1. **æ›´å¤šå‡½æ•¸æª¢æ¸¬ï¼š** æ”¯æ´æ›´å¤šç­–ç•¥ç›¸é—œå‡½æ•¸çš„æª¢æ¸¬
2. **ç¨‹å¼ç¢¼å»ºè­°ï¼š** æ ¹æ“šåˆ†æçµæœæä¾›ç¨‹å¼ç¢¼æ”¹é€²å»ºè­°
3. **æ•ˆèƒ½åˆ†æï¼š** åˆ†æç­–ç•¥çš„è¨ˆç®—è¤‡é›œåº¦å’Œæ•ˆèƒ½ç‰¹é»
4. **è‡ªå‹•åˆ†é¡ï¼š** æ ¹æ“šç­–ç•¥ç‰¹é»è‡ªå‹•æ¨è–¦é©åˆçš„ç­–ç•¥é¡å‹

## Jupyter ç­–ç•¥å‰µå»ºåŠŸèƒ½

### åŠŸèƒ½æ¦‚è¿°

ç¾åœ¨ç­–ç•¥ç·¨è¼¯å™¨æ”¯æ´å…©ç¨®å‰µå»ºæ¨¡å¼ï¼š
1. **å‚³çµ±ç·¨è¼¯å™¨æ¨¡å¼** - å®Œæ•´çš„ç­–ç•¥ç¨‹å¼ç¢¼ç·¨è¼¯
2. **Jupyter æ¨¡å¼** - äº’å‹•å¼å–®å…ƒæ ¼ç·¨è¼¯

### æ–°å¢ç­–ç•¥æµç¨‹

#### 1. é¸æ“‡ç·¨è¼¯æ¨¡å¼

åœ¨æ–°å»ºç­–ç•¥å°è©±æ¡†ä¸­ï¼Œé¦–å…ˆé¸æ“‡ç·¨è¼¯æ¨¡å¼ï¼š

- **å‚³çµ±ç·¨è¼¯å™¨**ï¼šé©ç”¨æ–¼å®Œæ•´çš„ç­–ç•¥ç¨‹å¼ç¢¼é–‹ç™¼
- **Jupyter æ¨¡å¼**ï¼šé©ç”¨æ–¼äº’å‹•å¼ç­–ç•¥é–‹ç™¼å’Œè³‡æ–™åˆ†æ

#### 2. é¸æ“‡ç­–ç•¥é¡å‹

##### å‚³çµ±ç·¨è¼¯å™¨æ¨¡å¼ä¸‹çš„ç­–ç•¥é¡å‹ï¼š
- **å‘é‡åŒ–æ¨¡æ¿**ï¼šæ•ˆèƒ½æœ€ä½³ï¼Œé©ç”¨æ–¼ç°¡å–®é‚è¼¯
- **ç‹€æ…‹æ©Ÿæ¨¡æ¿**ï¼šé©ç”¨æ–¼è¤‡é›œé‚è¼¯å’Œç‹€æ…‹è¿½è¹¤
- **æ··åˆæ¨¡å¼æ¨¡æ¿**ï¼šåŒ…å«å‘é‡åŒ–å’Œç‹€æ…‹æ©Ÿå…©ç¨®æ¨¡å¼
- **ç©ºç™½ç­–ç•¥**ï¼šå¾é›¶é–‹å§‹å»ºç«‹

##### Jupyter æ¨¡å¼ä¸‹çš„ç­–ç•¥é¡å‹ï¼š
- **å‘é‡åŒ–ç­–ç•¥**ï¼šä¸€æ¬¡æ€§è¨ˆç®—æ‰€æœ‰ä¿¡è™Ÿ
- **ç‹€æ…‹æ©Ÿç­–ç•¥**ï¼šé€ç­†è™•ç†ï¼Œè¿½è¹¤ç‹€æ…‹
- **æ··åˆç­–ç•¥**ï¼šçµåˆå‘é‡åŒ–å’Œç‹€æ…‹æ©Ÿå„ªå‹¢
- **åˆ†ææ¨¡å¼**ï¼šç´”è³‡æ–™åˆ†æï¼Œç„¡äº¤æ˜“é‚è¼¯

### Jupyter ç­–ç•¥é¡å‹è©³è§£

#### 1. å‘é‡åŒ–ç­–ç•¥ (Vectorized Strategy)

**ç‰¹é»ï¼š**
- ä¸€æ¬¡æ€§è™•ç†æ‰€æœ‰è³‡æ–™
- ä½¿ç”¨ NumPy/Pandas å‘é‡åŒ–é‹ç®—
- æ•ˆèƒ½æœ€ä½³ï¼Œé©åˆå¤§é‡è³‡æ–™è™•ç†

**é©ç”¨å ´æ™¯ï¼š**
- ç°¡å–®çš„æŠ€è¡“æŒ‡æ¨™ç­–ç•¥
- åŸºæ–¼çµ±è¨ˆçš„é‡åŒ–ç­–ç•¥
- éœ€è¦å¿«é€Ÿå›æ¸¬çš„ç­–ç•¥

**ç¯„ä¾‹åŠŸèƒ½ï¼š**
- ç§»å‹•å¹³å‡äº¤å‰ä¿¡è™Ÿ
- RSI è¶…è²·è¶…è³£ä¿¡è™Ÿ
- å¸ƒæ—é€šé“çªç ´ä¿¡è™Ÿ
- ç¶œåˆä¿¡è™Ÿç”Ÿæˆ

#### 2. ç‹€æ…‹æ©Ÿç­–ç•¥ (State Machine Strategy)

**ç‰¹é»ï¼š**
- é€ç­†è™•ç†è³‡æ–™
- è¿½è¹¤äº¤æ˜“ç‹€æ…‹
- æ”¯æ´è¤‡é›œçš„é€²å‡ºå ´é‚è¼¯

**é©ç”¨å ´æ™¯ï¼š**
- è¤‡é›œçš„äº¤æ˜“é‚è¼¯
- éœ€è¦ç‹€æ…‹è¿½è¹¤çš„ç­–ç•¥
- åŸºæ–¼äº‹ä»¶é©…å‹•çš„ç­–ç•¥

**ç¯„ä¾‹åŠŸèƒ½ï¼š**
- ç‹€æ…‹æ©Ÿé‚è¼¯å¯¦ä½œ
- é€²å‡ºå ´æ¢ä»¶åˆ¤æ–·
- äº¤æ˜“è¨˜éŒ„è¿½è¹¤
- ç¸¾æ•ˆåˆ†æ

#### 3. æ··åˆç­–ç•¥ (Hybrid Strategy)

**ç‰¹é»ï¼š**
- çµåˆå‘é‡åŒ–å’Œç‹€æ…‹æ©Ÿå„ªå‹¢
- å‘é‡åŒ–è¨ˆç®—æŠ€è¡“æŒ‡æ¨™
- ç‹€æ…‹æ©Ÿéæ¿¾å’Œå„ªåŒ–ä¿¡è™Ÿ

**é©ç”¨å ´æ™¯ï¼š**
- éœ€è¦è¤‡é›œä¿¡è™Ÿéæ¿¾çš„ç­–ç•¥
- å¤šæŒ‡æ¨™çµ„åˆç­–ç•¥
- éœ€è¦è¶¨å‹¢ç¢ºèªçš„ç­–ç•¥

**ç¯„ä¾‹åŠŸèƒ½ï¼š**
- å‘é‡åŒ–ä¿¡è™Ÿç”Ÿæˆ
- ç‹€æ…‹æ©Ÿä¿¡è™Ÿéæ¿¾
- å¤šé‡ç¢ºèªæ©Ÿåˆ¶
- æ­¢ææ­¢ç›ˆé‚è¼¯

#### 4. åˆ†ææ¨¡å¼ (Analysis Mode)

**ç‰¹é»ï¼š**
- ç´”è³‡æ–™åˆ†æ
- ç„¡äº¤æ˜“é‚è¼¯
- å°ˆæ³¨æ–¼è³‡æ–™æ¢ç´¢å’Œè¦–è¦ºåŒ–

**é©ç”¨å ´æ™¯ï¼š**
- è³‡æ–™æ¢ç´¢å’Œåˆ†æ
- ç­–ç•¥ç ”ç©¶å’Œé–‹ç™¼
- å¸‚å ´ç ”ç©¶

**ç¯„ä¾‹åŠŸèƒ½ï¼š**
- åŸºæœ¬çµ±è¨ˆåˆ†æ
- æŠ€è¡“æŒ‡æ¨™è¨ˆç®—
- åƒ¹æ ¼èµ°å‹¢åˆ†æ
- å ±é…¬ç‡åˆ†æ

### ä½¿ç”¨æµç¨‹

#### 1. å‰µå»º Jupyter ç­–ç•¥

1. é»æ“Šã€Œæ–°å»ºç­–ç•¥ã€æŒ‰éˆ•
2. é¸æ“‡ã€ŒJupyter æ¨¡å¼ã€
3. é¸æ“‡ç­–ç•¥é¡å‹ï¼ˆå‘é‡åŒ–/ç‹€æ…‹æ©Ÿ/æ··åˆ/åˆ†æï¼‰
4. è¼¸å…¥ç­–ç•¥åç¨±å’Œæè¿°
5. é»æ“Šã€Œå»ºç«‹ã€

#### 2. ç·¨è¼¯ Jupyter ç­–ç•¥

1. ç³»çµ±è‡ªå‹•åˆ‡æ›åˆ° Jupyter æ¨¡å¼
2. è¼‰å…¥å°æ‡‰é¡å‹çš„ç¯„ä¾‹ç¨‹å¼ç¢¼
3. ä½¿ç”¨å–®å…ƒæ ¼ç·¨è¼¯å™¨ä¿®æ”¹ç¨‹å¼ç¢¼
4. æŒ‰ Shift+Enter åŸ·è¡Œå–®å…ƒæ ¼
5. æŒ‰ Ctrl+Enter åŸ·è¡Œä¸¦æ–°å¢å–®å…ƒæ ¼

#### 3. è¼‰å…¥ç¾æœ‰ç­–ç•¥

1. å¾ç­–ç•¥åˆ—è¡¨é¸æ“‡ç­–ç•¥
2. ç³»çµ±è‡ªå‹•æª¢æ¸¬ç·¨è¼¯æ¨¡å¼
3. Jupyter ç­–ç•¥è‡ªå‹•åˆ‡æ›åˆ° Jupyter æ¨¡å¼
4. å‚³çµ±ç­–ç•¥ä½¿ç”¨å‚³çµ±ç·¨è¼¯å™¨

### æŠ€è¡“å¯¦ç¾

#### å¾Œç«¯æ”¯æ´

1. **ç­–ç•¥ç®¡ç†å™¨æ“´å±•**ï¼š
   - æ”¯æ´ `editor_mode` å’Œ `jupyter_strategy_type` æ¬„ä½
   - æ ¹æ“šç·¨è¼¯æ¨¡å¼è¼‰å…¥ä¸åŒæ¨¡æ¿

2. **Jupyter API**ï¼š
   - `/api/jupyter/execute` - åŸ·è¡Œç¨‹å¼ç¢¼
   - `/api/jupyter/sample-data` - è¼‰å…¥ç¯„ä¾‹è³‡æ–™

#### å‰ç«¯å¯¦ç¾

1. **ç·¨è¼¯æ¨¡å¼åˆ‡æ›**ï¼š
   - å‹•æ…‹é¡¯ç¤º/éš±è—ç­–ç•¥é¡å‹é¸é …
   - æ ¹æ“šé¸æ“‡è¼‰å…¥å°æ‡‰æ¨¡æ¿

2. **Jupyter ç·¨è¼¯å™¨**ï¼š
   - å¤šå–®å…ƒæ ¼ç·¨è¼¯
   - å³æ™‚ç¨‹å¼ç¢¼åŸ·è¡Œ
   - å¤šç¨®è¼¸å‡ºæ ¼å¼æ”¯æ´

### æ³¨æ„äº‹é …

1. **æ¨¡å¼åˆ‡æ›**ï¼šå‰µå»ºå¾Œç„¡æ³•æ›´æ”¹ç·¨è¼¯æ¨¡å¼
2. **ç­–ç•¥é¡å‹**ï¼šJupyter ç­–ç•¥é¡å‹åƒ…å½±éŸ¿åˆå§‹æ¨¡æ¿
3. **ç¨‹å¼ç¢¼åŸ·è¡Œ**ï¼šJupyter æ¨¡å¼ä¸‹çš„ç¨‹å¼ç¢¼åœ¨å¾Œç«¯å®‰å…¨ç’°å¢ƒä¸­åŸ·è¡Œ
4. **è³‡æ–™è¼‰å…¥**ï¼šæ”¯æ´è¼‰å…¥ç¯„ä¾‹è³‡æ–™é€²è¡Œæ¸¬è©¦

### æœªä¾†æ“´å±•

1. **æ›´å¤šç­–ç•¥é¡å‹**ï¼šæ”¯æ´æ›´å¤šå°ˆæ¥­ç­–ç•¥æ¨¡æ¿
2. **äº’å‹•å¼åœ–è¡¨**ï¼šæ”¯æ´ Plotly ç­‰äº’å‹•å¼åœ–è¡¨
3. **ç­–ç•¥åˆ†äº«**ï¼šæ”¯æ´ Jupyter ç­†è¨˜æœ¬åŒ¯å‡º/åŒ¯å…¥
4. **å”ä½œåŠŸèƒ½**ï¼šæ”¯æ´å¤šäººå”ä½œç·¨è¼¯ 