# 台灣股票回測與自動下單系統

這是一個完整的台灣股票回測與自動下單系統，支援多策略、多資料來源、多股票並行處理，並提供完整的前後端介面。系統採用現代化的 Web 架構，支援 Jupyter 風格的互動式策略開發。

## 🚀 功能特色

### 📊 回測功能
- **策略支援**：自定義策略
- **多資料來源**：Excel上傳、API資料、手動輸入、範例資料
- **多股票並行處理**：使用多執行緒提升回測效能
- **智能欄位映射**：支援多種Excel欄位格式
- **完整前後端**：現代化Web介面，支援即時回測
- **詳細測試**：完整的單元測試和整合測試

### 🤖 自動下單功能
- **即時監控**：自動執行策略信號
- **風險控制**：停利停損、部位管理
- **多券商支援**：可擴展的券商API介面

### 🗄️ 快取系統
- **雙層快取**：記憶體快取 + 檔案快取
- **自動管理**：記憶體不足時自動清理最舊的資料
- **TTL 機制**：可設定快取存活時間
- **統計資訊**：提供詳細的快取使用統計
- **API 整合**：與 StockAPI 無縫整合

### 📈 自定義策略系統
### 傳統策略編輯器
- **視覺化編輯器**：網頁版策略編輯器
- **即時程式碼執行**：程式碼立即在後端執行並顯示結果
- **模板系統**：提供策略模板
### 💻 Jupyter 風格
- **互動式開發**：支援單元格編輯和即時執行
- **變數共享**：單元格間變數保持狀態
- **筆記本管理**：支援儲存、載入、匯出筆記本
- **即時驗證**：語法檢查和函數檢測

- **版本管理**：策略的建立、更新、刪除
- **動態載入**：程式碼字串動態編譯執行
- **圖表顯示**：支援 Matplotlib、Seaborn、Plotly 圖表
- **資料分析**：內建 Pandas、Polars、NumPy 等資料分析工具

### 📋 資料預覽系統
- **範例資料**：提供多種預設資料類型
- **表格預覽**：支援最多100筆資料的表格顯示
- **自定義資料類型**：可新增和管理自定義資料類型
- **快速測試**：快速載入資料測試策略邏輯

### 📊 交易記錄管理
- **多維度篩選**：支援日期、股票、策略、方向等多種篩選條件
- **統計分析**：提供勝率、報酬率、最大回撤等關鍵指標
- **詳細資訊**：包含進出場價格、損益計算、風險控制等完整資訊
- **匯出功能**：支援Excel匯出和分頁顯示

### 🎯 股票選擇器
- **多來源支援**：Excel匯入、手動新增、條件篩選
- **列表管理**：建立、編輯、刪除選股列表
- **策略整合**：與策略編輯器無縫整合
- **批量操作**：支援批量新增、移除股票

### 🛠️ 共同功能
- **價格計算工具**: 最小變動單位、漲跌停價格計算
- **交易成本計算**: 手續費、證交稅自動計算
- **除權息調整**: 自動處理除權息對股價的影響
- **模組化設計**: 易於擴展和維護

## 📁 專案結構

```
trading_web_system/
├── api/                    # API模組
│   ├── stock_api.py       # 股票資料API
│   ├── broker_api.py      # 券商API
│   ├── jupyter_api.py     # Jupyter編輯器API
│   ├── strategy_api.py    # 策略管理API
│   ├── backtest_api.py    # 回測API
│   ├── chart_api.py       # 圖表API
│   ├── cache_api.py       # 快取API
│   ├── excel_api.py       # Excel處理API
│   ├── sample_data_api.py # 範例資料API
│   └── stock_list_api.py  # 股票清單API
├── config/                # 配置檔案
│   ├── api_config.py      # API配置
│   └── trading_config.py  # 交易配置
├── core/                  # 核心功能
│   ├── cache_manager.py   # 快取管理器
│   ├── data_provider.py   # 資料提供器
│   ├── price_utils.py     # 價格計算工具
│   ├── stock_list_manager.py # 股票清單管理器
│   ├── technical_indicators.py # 技術指標
│   ├── trading_utils.py   # 交易工具
│   └── utils.py           # 通用工具函數
├── data/                  # 資料目錄
│   ├── cache/             # 快取檔案
│   ├── uploads/           # 上傳檔案
│   ├── exports/           # 匯出檔案
│   ├── strategies/        # 策略檔案
│   └── stock_lists/       # 股票清單
├── routes/                # 路由模組
│   ├── api_routes.py      # API路由
│   └── pages.py           # 頁面路由
├── strategies/            # 策略模組
│   ├── base_strategy.py   # 策略基礎類別
│   ├── dynamic_strategy.py # 動態策略
│   └── strategy_manager.py # 策略管理器
├── web/                   # 網頁介面
│   ├── static/            # 靜態檔案
│   │   ├── css/           # 樣式檔案
│   │   ├── js/            # JavaScript檔案
│   │   └── images/        # 圖片檔案
│   └── templates/         # HTML模板
│       ├── base.html      # 基礎模板
│       ├── index.html     # 首頁
│       ├── backtest.html  # 回測頁面
│       ├── strategy_editor.html # 策略編輯器
│       ├── stock_selector.html # 股票選擇器
│       ├── cache_manager.html # 快取管理
│       ├── auto_trading.html # 自動下單頁面
│       ├── trading_records.html # 交易記錄頁面
│       └── settings.html  # 設定頁面
├── main.py               # FastAPI主程式
├── run.py                # 啟動腳本
├── requirements.txt      # 依賴套件
└── README.md            # 說明文件
```

## 🛠️ 安裝與設定

### 1. 環境需求
- Python 3.8+
- Windows 10/11 或 Linux/macOS

### 2. 安裝依賴
```bash
pip install -r requirements.txt
```

### 3. 啟動系統
```bash
python run.py
```

系統將在 `http://localhost:8000` 啟動

## 📖 使用說明

### 首頁功能
- **回測系統**: 進入股票策略回測功能
- **策略編輯器**: 進入 Jupyter 風格策略編輯器
- **股票選擇器**: 管理股票清單
- **快取管理**: 管理系統快取
- **自動下單**: 進入自動交易系統
- **交易記錄**: 查看歷史交易記錄
- **系統設定**: 配置API和系統參數

### 策略編輯器

#### 1. 編輯模式
- **傳統模式**: 原有的程式碼編輯器，適合編寫完整的策略程式碼
- **Jupyter 模式**: 互動式單元格編輯器，適合探索性資料分析和策略開發

#### 2. 單元格功能
- **新增單元格**: 點擊「新增單元格」按鈕或使用 Ctrl+Enter
- **執行單元格**: 點擊執行按鈕或使用 Shift+Enter
- **刪除單元格**: 點擊刪除按鈕
- **重新編號**: 自動重新編號單元格

#### 3. 支援的模組
- **基本 Python 模組**: np, pd, pl, plt, sns, go
- **策略工具模組**: PriceUtils, Utils, TradeRecord, HoldingPosition

#### 4. 範例程式碼
```python
# 載入範例資料
import pandas as pd
import numpy as np

# 生成股票資料
dates = pd.date_range('2024-01-01', '2024-12-31', freq='D')
close_prices = 100 + np.cumsum(np.random.normal(0, 0.5, len(dates)))
df = pd.DataFrame({
    'date': dates,
    'close': close_prices,
    'volume': np.random.uniform(1000000, 5000000, len(dates))
})

print(f"載入 {len(df)} 筆股票資料")
df.head()
```

### 快取系統

#### 1. 快取管理頁面
訪問 `/cache-manager` 可以查看：
- 記憶體使用量統計
- 快取項目詳情
- 股票代碼列表
- 快取清理功能

#### 2. API 整合
```python
from api.stock_api import StockAPI

async with StockAPI() as stock_api:
    # 第一次請求會從 API 取得並快取
    data1 = await stock_api.get_stock_price(
        stock_ids=["2330"],
        start_date="2024-01-01",
        end_date="2024-01-03",
        use_cache=True  # 啟用快取
    )
```

### 自定義策略系統

#### 1. 策略編輯器
訪問 `/strategy-editor` 進入策略編輯器，可以：
- 建立新策略
- 編輯現有策略
- 載入策略模板
- 驗證策略程式碼
- 測試策略功能

#### 2. 策略程式碼格式
```python
def should_entry(stock_data, current_index):
    """判斷是否應該進場"""
    current_row = stock_data[current_index]
    
    # 範例：當收盤價大於開盤價時進場
    if current_row["close"] > current_row["open"]:
        return True, {"reason": "收盤價大於開盤價"}
    
    return False, {}

def should_exit(stock_data, current_index, position):
    """判斷是否應該出場"""
    current_row = stock_data[current_index]
    entry_price = position["entry_price"]
    
    # 計算虧損率
    loss_rate = ((current_row["close"] - entry_price) / entry_price) * 100
    
    # 範例：虧損超過5%時出場
    if loss_rate <= -5:
        return True, {"reason": f"虧損{loss_rate:.2f}%"}
    
    return False, {}
```

### 資料預覽系統

#### 1. 預設資料類型
- **每日股價**: 股票每日開盤、收盤、最高、最低價等基本資訊
- **分K股價**: 股票分K線圖資料
- **除權息資料**: 股票除權息相關資訊
- **每日股價合併除權息**: 每日股價資料並包含除權息調整資訊
- **技術指標**: 包含各種技術指標的股價資料

#### 2. 使用方式
1. 開啟策略編輯器頁面
2. 點擊「載入範例資料」按鈕
3. 在對話框中選擇資料類型
4. 設定相關參數
5. 點擊「載入資料」
6. 資料將以表格形式顯示在預覽區域

### 📊 交易記錄管理

#### 1. 篩選功能
- **日期範圍篩選**: 按進場/出場日期範圍篩選
- **股票代碼篩選**: 按特定股票代碼篩選
- **策略類型篩選**: 按使用的策略篩選
- **交易方向篩選**: 按買入/賣出方向篩選
- **損益範圍篩選**: 按損益金額範圍篩選

#### 2. 統計分析
- **總交易次數**: 顯示總交易筆數
- **勝率統計**: 計算獲利交易的比例
- **總報酬**: 顯示總體投資報酬率
- **平均報酬**: 計算平均每筆交易的報酬率
- **最大單筆獲利/虧損**: 顯示最大獲利和虧損金額
- **最大回撤分析**: 分析最大回撤期間和幅度

#### 3. 詳細交易資訊
- **進出場資訊**: 進場日期、出場日期、進場價格、出場價格
- **交易詳情**: 股票代碼、股票名稱、交易方向、股數
- **損益計算**: 損益金額、損益率、手續費、證交稅、淨損益
- **風險控制**: 停利價、停損價、出場原因
- **持有期間**: 持有天數、策略名稱

#### 4. 匯出功能
- **Excel匯出**: 將篩選結果匯出為Excel檔案
- **分頁顯示**: 支援大量資料的分頁顯示
- **即時更新**: 自動重新整理最新交易記錄

### 🎯 股票選擇器

#### 1. 選股列表管理
- **建立選股列表**: 支援自定義名稱和描述
- **編輯選股列表**: 修改列表名稱、描述和股票內容
- **刪除選股列表**: 安全刪除確認機制
- **列表匯出**: 將選股列表匯出到策略編輯器

#### 2. 股票來源支援
- **Excel檔案匯入**: 支援 `.xlsx` 格式，必要欄位：`stock_id`, `startdate`, `enddate`
- **手動新增股票**: 單筆新增股票代碼和名稱
- **條件篩選**: 多條件組合篩選股票
- **批量操作**: 支援批量新增、移除股票

#### 3. 策略整合
- **匯出到策略**: 將選股列表匯出到策略編輯器
- **股票來源選擇**: 策略編輯器中可選擇股票來源
- **動態切換**: 支援Excel檔案或選股列表的動態切換

#### 4. 資料格式
**Excel檔案格式**：
| 欄位名稱 | 說明 | 範例 |
|---------|------|------|
| stock_id | 股票代碼 | 2330 |
| stock_name | 股票名稱 | 台積電 |
| start_date | 開始日期 | 2024-01-01 |
| end_date | 結束日期 | 2024-12-31 |

#### 5. 使用方式
1. **建立選股列表**：
   - 進入選股編輯器頁面 (`/stock-selector`)
   - 點擊「新建選股列表」按鈕
   - 輸入列表名稱和描述
   - 選擇股票來源方式

2. **Excel匯入股票**：
   - 準備Excel檔案，包含必要欄位
   - 點擊「匯入Excel」按鈕
   - 選擇檔案並上傳
   - 系統自動解析並顯示股票列表

3. **條件篩選股票**：
   - 點擊「條件篩選」按鈕
   - 設定篩選條件
   - 點擊「套用條件」
   - 查看篩選結果

4. **匯出到策略**：
   - 在選股編輯器中選擇要匯出的股票
   - 點擊「匯出到策略」按鈕
   - 選擇目標策略
   - 確認匯出

### 回測功能使用

#### 1. 選擇策略
- **當沖策略**：當日沖銷，以漲跌停為依據
- **波段策略**：波段交易，以20日新高為依據
- **詢圈公告策略**：基於詢圈公告進行交易
- **自定義策略**：使用策略編輯器建立的自定義策略

#### 2. 設定資料來源
- **API模式**：上傳包含股票代碼和日期的Excel檔案，系統從API取得股價資料
- **Excel模式**：上傳包含完整K線資料的Excel檔案
- **範例資料**：使用系統提供的範例資料

#### 3. Excel檔案格式

**API模式格式**：
| stock_id | date |
|----------|------|
| 2330 | 2024-01-01 |
| 2330 | 2024-01-02 |

**Excel模式格式**：
| stock_id | date | open | high | low | close |
|----------|------|------|------|-----|-------|
| 2330 | 2024-01-01 | 100 | 105 | 98 | 103 |
| 2330 | 2024-01-02 | 103 | 108 | 102 | 106 |

#### 4. 策略參數

**當沖策略參數**：
- 使用漲跌停單：是否使用漲跌停單
- 最大持有天數：最大持有天數（1-7天）
- 強制出場：是否強制出場

**波段策略參數**：
- 停利比例：停利百分比（1%-100%）
- 停損比例：停損百分比（-100%--1%）
- 最大持有天數：最大持有天數（1-365天）
- 強制出場：是否強制出場
- 新高計算期間：新高計算期間（5-60天）

**詢圈公告策略參數**：
- 公告延遲天數：公告延遲天數（0-10天）
- 部位大小比例：部位大小比例（1%-100%）
- 最大持有天數：最大持有天數（1-365天）

### 自動下單功能使用

#### 1. 選擇策略和參數
與回測功能相同，選擇策略並設定參數。

#### 2. 選擇券商
選擇您使用的券商API。

#### 3. 設定資金
設定自動下單的初始資金。

#### 4. 啟動/停止
點擊啟動按鈕開始自動下單，點擊停止按鈕停止。

### 交易記錄管理

#### 1. 篩選功能
- **日期範圍篩選**: 按進場/出場日期範圍篩選
- **股票代碼篩選**: 按特定股票代碼篩選
- **策略類型篩選**: 按使用的策略篩選
- **交易方向篩選**: 按買入/賣出方向篩選
- **損益範圍篩選**: 按損益金額範圍篩選

#### 2. 統計分析
- **總交易次數**: 顯示總交易筆數
- **勝率統計**: 計算獲利交易的比例
- **總報酬**: 顯示總體投資報酬率
- **平均報酬**: 計算平均每筆交易的報酬率
- **最大單筆獲利/虧損**: 顯示最大獲利和虧損金額
- **最大回撤分析**: 分析最大回撤期間和幅度

#### 3. 詳細交易資訊
- **進出場資訊**: 進場日期、出場日期、進場價格、出場價格
- **交易詳情**: 股票代碼、股票名稱、交易方向、股數
- **損益計算**: 損益金額、損益率、手續費、證交稅、淨損益
- **風險控制**: 停利價、停損價、出場原因
- **持有期間**: 持有天數、策略名稱

#### 4. 匯出功能
- **Excel匯出**: 將篩選結果匯出為Excel檔案
- **分頁顯示**: 支援大量資料的分頁顯示
- **即時更新**: 自動重新整理最新交易記錄

### 股票選擇器使用

#### 1. 建立選股列表
1. 進入選股編輯器頁面 (`/stock-selector`)
2. 點擊「新建選股列表」按鈕
3. 輸入列表名稱和描述
4. 選擇股票來源方式

#### 2. Excel匯入股票
1. 準備Excel檔案，包含必要欄位
2. 點擊「匯入Excel」按鈕
3. 選擇檔案並上傳
4. 系統自動解析並顯示股票列表

#### 3. 條件篩選股票
1. 點擊「條件篩選」按鈕
2. 設定篩選條件
3. 點擊「套用條件」
4. 查看篩選結果

#### 4. 匯出到策略
1. 在選股編輯器中選擇要匯出的股票
2. 點擊「匯出到策略」按鈕
3. 選擇目標策略
4. 確認匯出

### 系統設定

#### 1. API設定
- **股票資料API**: 設定股價資料來源
- **券商API**: 設定自動下單券商

#### 2. 交易參數
- 手續費率和最低手續費
- 證交稅率
- 預設初始資金
- 風險控制參數

#### 3. 系統參數
- 日誌等級和檔案管理
- 會話超時設定
- 檔案上傳限制
- 自動清理設定

#### 4. 備份設定
- 自動備份頻率和時間
- 備份保留天數
- 手動備份和還原

## 策略開發

### 新增策略
1. 繼承 `BaseStrategy` 類別
2. 實作必要的方法：
   - `should_entry()`: 進場條件
   - `should_exit()`: 出場條件
   - `execute_trade()`: 執行交易
3. 在 `config/trading_config.py` 中新增配置
4. 在 `main.py` 中註冊策略

### 策略配置範例
```python
"new_strategy": {
    "name": "新策略",
    "description": "策略描述",
    "parameters": {
        "param1": {
            "type": "number",
            "label": "參數1",
            "default": 0.1,
            "min": 0,
            "max": 1,
            "description": "參數說明"
        }
    },
    "charts": ["equity_curve", "drawdown"],
    "data_source": "api",
    "stock_source": "excel"
}
```

## 📊 資料格式

### Excel檔案格式

#### 股價資料檔案
| 欄位 | 說明 | 範例 |
|------|------|------|
| stock_id | 股票代碼 | 2330 |
| date | 日期 | 2024-01-01 |
| open | 開盤價 | 100.0 |
| high | 最高價 | 101.0 |
| low | 最低價 | 99.0 |
| close | 收盤價 | 100.5 |
| volume | 成交量 | 1000000 |

#### 股票清單檔案
| 欄位 | 說明 | 範例 |
|------|------|------|
| stock_id | 股票代碼 | 2330 |
| date | 日期 | 2024-01-01 |

#### 選股列表檔案
| 欄位名稱 | 說明 | 範例 |
|---------|------|------|
| stock_id | 股票代碼 | 2330 |
| stock_name | 股票名稱 | 台積電 |
| start_date | 開始日期 | 2024-01-01 |
| end_date | 結束日期 | 2024-12-31 |

## 🔒 安全性

- API金鑰使用環境變數或加密儲存
- 檔案上傳有大小和格式限制
- 系統支援HTTPS加密傳輸
- 定期備份重要資料

## 🐛 故障排除

### 常見問題

#### 1. 模組導入錯誤
```bash
# 檢查Python版本
python --version

# 重新安裝依賴
pip install -r requirements.txt --force-reinstall
```

#### 2. 檔案上傳失敗
- 檢查檔案格式是否為Excel (.xlsx, .xls)
- 檢查檔案大小是否超過50MB
- 確認檔案包含必要欄位

#### 3. API連線失敗
- 檢查網路連線
- 確認API金鑰是否正確
- 檢查API服務是否正常

#### 4. 回測執行失敗
- 檢查資料格式是否正確
- 確認策略參數是否合理
- 查看系統日誌檔案

#### 5. Jupyter編輯器問題
- 檢查程式碼語法是否正確
- 確認使用的模組在支援列表中
- 避免執行過於複雜的程式碼

#### 6. 交易記錄問題
- 檢查篩選條件是否正確設定
- 確認交易記錄資料是否完整
- 檢查Excel匯出功能是否正常

#### 7. 選股功能問題
- 檢查Excel檔案格式是否符合要求
- 確認股票代碼是否正確
- 檢查選股列表是否成功建立

### 日誌檔案
系統日誌位於 `logs/` 目錄下，包含:
- `app.log`: 應用程式日誌
- `error.log`: 錯誤日誌
- `access.log`: 存取日誌

## 🤝 貢獻指南

1. Fork 專案
2. 建立功能分支 (`git checkout -b feature/AmazingFeature`)
3. 提交變更 (`git commit -m 'Add some AmazingFeature'`)
4. 推送到分支 (`git push origin feature/AmazingFeature`)
5. 開啟 Pull Request

## 📄 授權條款

本專案採用 MIT 授權條款 - 詳見 [LICENSE](LICENSE) 檔案

## 📞 支援

如有問題或建議，請:
1. 查看 [Issues](../../issues) 頁面
2. 建立新的 Issue
3. 聯繫開發團隊

## 🔄 更新日誌

### v3.0.0 (最新)
- 新增 Jupyter 風格策略編輯器
- 新增快取系統
- 新增自定義策略系統
- 新增資料預覽系統
- 新增股票選擇器功能
- 改善策略編輯器使用者體驗
- 新增完整的參數設定系統
- 支援共用參數（手續費、證交稅、交易股數）
- 新增進場/出場條件選擇
- 新增停利/停損開關選項
- 新增漲跌停限制選項
- 改善參數顯示格式（使用百分比）
- 更新所有策略的參數配置
- 新增完整的參數測試

### v2.0.0
- 新增完整的參數設定系統
- 支援共用參數（手續費、證交稅、交易股數）
- 新增進場/出場條件選擇
- 新增停利/停損開關選項
- 新增漲跌停限制選項
- 改善參數顯示格式（使用百分比）
- 更新所有策略的參數配置
- 新增完整的參數測試

### v1.0.0
- 初始版本
- 支援基本回測功能
- 支援Excel檔案上傳
- 支援多執行緒處理

## 系統特色

### 🚀 高效能多執行緒處理
- **並行回測**: 支援多執行緒並行處理多股票回測，大幅提升處理速度
- **智能線程管理**: 自動調整線程數量，避免過度並行造成系統負載
- **容錯處理**: 單一股票處理失敗不影響其他股票的回測執行
- **效能提升**: 處理100支股票時，效能可提升5-10倍

### 📊 多策略支援
- **當沖策略**: 適合短線交易，日內進出
- **波段策略**: 適合中期持有，包含除權息調整
- **詢圈公告策略**: 專門處理詢圈公告相關交易
- **自定義策略**: 支援用戶自定義策略開發
- **策略擴展**: 基於 `BaseStrategy` 類別，易於新增自定義策略

### 📈 多資料來源
- **API資料**: 支援多種股票API資料來源
- **Excel上傳**: 支援Excel檔案上傳，自動識別欄位格式
- **範例資料**: 提供多種預設資料類型供測試使用
- **欄位映射**: 智能識別中文/英文欄位名稱
- **資料驗證**: 自動驗證資料完整性和格式正確性

### 💻 Jupyter 風格開發環境
- **互動式編輯**: 支援單元格編輯和即時執行
- **即時程式碼執行**: 程式碼立即在後端執行並顯示結果
- **圖表顯示**: 支援 Matplotlib、Seaborn、Plotly 圖表
- **資料分析**: 內建 Pandas、Polars、NumPy 等資料分析工具
- **變數共享**: 單元格間變數保持狀態
- **筆記本管理**: 支援儲存、載入、匯出筆記本

### 🗄️ 智能快取系統
- **雙層快取**: 記憶體快取 + 檔案快取
- **自動管理**: 記憶體不足時自動清理最舊的資料
- **TTL 機制**: 可設定快取存活時間
- **統計資訊**: 提供詳細的快取使用統計
- **API 整合**: 與 StockAPI 無縫整合

### 🎯 動態參數配置
- **參數來源**: 支援手動輸入、Excel上傳、API取得等多種參數來源
- **策略專用**: 不同策略顯示對應的參數設定
- **即時驗證**: 參數輸入時即時驗證格式和範圍
- **格式說明**: 提供詳細的Excel格式說明和範例

### 📊 完整交易記錄系統
- **多維度篩選**: 支援日期、股票、策略、方向等多種篩選條件
- **統計分析**: 提供勝率、報酬率、最大回撤等關鍵指標
- **詳細資訊**: 包含進出場價格、損益計算、風險控制等完整資訊
- **匯出功能**: 支援Excel匯出和分頁顯示

### 🎯 智能選股系統
- **多來源支援**: Excel匯入、手動新增、條件篩選
- **列表管理**: 建立、編輯、刪除選股列表
- **策略整合**: 與策略編輯器無縫整合
- **批量操作**: 支援批量新增、移除股票

---

**注意**: 本系統僅供學習和研究使用，實際交易請謹慎評估風險。 